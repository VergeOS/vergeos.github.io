function thwvsOpenFormTab(elm,tab_id,form_type){thwvsf_base.openFormTab(elm,tab_id,form_type)}function thwvsf_upload_icon_image(elm,e){thwvsf_settings.upload_icon_image(elm,e)}function thwvsf_remove_icon_image(elm,e){thwvsf_settings.remove_icon_image(elm,e)}function thwvsf_change_term_type(elm,e){thwvsf_settings.change_term_type(elm,e)}function thwvsf_open_body(elm,e){thwvsf_settings.open_term_body(elm,e)}function thwvsfEditDesignForm(elm,design_styles,design_id,des_title){thwvsf_settings.EditDesignForm(elm,design_styles,design_id,des_title)}function thwvsfCloseDesignPopup(elm){thwvsf_settings.CloseDesignPopup(elm)}function thwvsfTriggerAttributeTab(elm){thwvsf_settings.TriggerAttributeTab(elm)}function thwvsfOpenAttributeForm(elm,id,design_type){thwvsf_settings.OpenAttributeForm(elm,id,design_type)}function thwvsfSwatchTypeChangeListner(elm){thwvsf_settings.SwatchTypeChangeListner(elm)}var thwvsf_base=function($,window,document){"use strict";function escapeHTML(html){var fn=function(tag){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;"}[tag]||tag};return html.replace(/[&<>"]/g,fn)}function isHtmlIdValid(id){return/^[a-z\_]+[a-z0-9\_]*$/.test(id.trim())}function isValidHexColor(value){return!!preg_match("/^#[a-f0-9]{6}$/i",value)}function setup_tiptip_tooltips(){var tiptip_args={attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200};$(".tips").tipTip(tiptip_args)}function setup_color_picker(form){var i=0;form.find(".thpladmin-colorpick").iris({change:function(event,ui){$(this).parent().find(".thpladmin-colorpickpreview").css({backgroundColor:ui.color.toString()})},hide:!0,border:!0}).click(function(){$(this).closest(".thwvsf_settings_fields_form").length>0?($(".iris-picker").hide(),$(this).closest(".thwvsf_settings_fields_form").find(".iris-picker").show()):($(".iris-picker").hide(),$(this).closest("td").find(".iris-picker").show())}),$("body").click(function(){$(".iris-picker").hide()}),$(".thpladmin-colorpick").click(function(event){event.stopPropagation()}),i++}function setup_popup_tabs(form,selector_prefix){$("."+selector_prefix+"-tabs-menu a").click(function(event){event.preventDefault(),$(this).parent().addClass("current"),$(this).parent().siblings().removeClass("current");var tab=$(this).attr("href");$("."+selector_prefix+"-tab-content").not(tab).css("display","none"),$(tab).fadeIn()})}function open_form_tab(elm,tab_id,form_type){var tabs_container=$("#thwvsf-tabs-container_"+form_type);$(elm).parent().addClass("current"),$(elm).parent().siblings().removeClass("current");var tab=$("#"+tab_id+"_"+form_type);tabs_container.find(".thpladmin-tab-content").not(tab).css("display","none"),$(tab).fadeIn()}function get_property_field_value(form,type,name){var value="";switch(type){case"select":value=form.find("select[name=i_"+name+"]").val(),value=null==value?"":value;break;case"checkbox":value=form.find("input[name=i_"+name+"]").prop("checked"),value=value?1:0;break;default:value=form.find("input[name=i_"+name+"]").val(),value=null==value?"":value}return value}function set_property_field_value(form,type,name,value,multiple){switch(type){case"select":1==multiple&&"string"==typeof value&&(value=value.split(","),name+="[]"),form.find('select[name="i_'+name+'"]').val(value);break;case"checkbox":value="yes"==value||1==value,form.find("input[name=i_"+name+"]").prop("checked",value);break;case"colorpicker":form.find("input[name=i_"+name+"]").val(value),form.find("span."+name+"_preview").css("background-color",value);break;case"radio":form.find("input[name=i_"+name+"]").val(value),form.find($("."+value)).addClass("rad-selected").siblings(".rad-selected").removeClass("rad-selected");break;default:form.find("input[name=i_"+name+"]").val(value)}}function setup_form_side_popup(){$(".pp_nav_tabs > li").click(function(){var index=$(this).data("index");open_tab($(this).closest(".popup-wrapper"),$(this),index),active_tab=index})}function open_tab(popup,link,index){var panel=popup.find(".data_panel_"+index);close_all_data_panel(popup),link.addClass("active"),panel.css("display","block")}function close_all_data_panel(popup){popup.find(".pp_nav_tabs > li").removeClass("active"),popup.find(".data-panel").css("display","none"),popup.find(".global-tabs > li").removeClass("active")}var active_tab=0;return{escapeHTML:escapeHTML,isHtmlIdValid:isHtmlIdValid,isValidHexColor:isValidHexColor,setup_tiptip_tooltips:setup_tiptip_tooltips,setupColorPicker:setup_color_picker,setupPopupTabs:setup_popup_tabs,openFormTab:open_form_tab,get_property_field_value:get_property_field_value,set_property_field_value:set_property_field_value,setup_form_side_popup:setup_form_side_popup}}(window.jQuery,window,document),thwvsf_settings=function($,window,document){"use strict";function upload_icon_image(elm,e){mediaUploader=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!1});var $image_div=$(elm).parents(".thwvsf-upload-image"),$index_media_image=$image_div.find(".i_index_media_img"),$index_media=$image_div.find(".i_index_media"),$remove_button=$image_div.find(".thwvsf_remove_image_button");mediaUploader.on("select",function(){var attachment=mediaUploader.state().get("selection").first().toJSON();$index_media_image.attr("src",attachment.url),$index_media.val(attachment.id),$(".thwvsf_remove_uploaded").show(),$remove_button.show()}),mediaUploader.open()}function remove_icon_image(elm,e){var $image_div=$(elm).parents(".thwvsf-upload-image"),$index_media_image=$image_div.find(".i_index_media_img"),$index_media=$image_div.find(".i_index_media"),$remove_button=$image_div.find(".thwvsf_remove_image_button");return $index_media_image.attr("src",placeholder),$index_media.val(""),$remove_button.hide(),!1}function change_term_type(elm,e){var type=$(elm).val(),form=$(elm).closest(".thwvsf_custom_attribute"),custom_attr_div=$(".thwvsf-custom-table");thwvsf_base.setupColorPicker(custom_attr_div),"select"==type?form.find($(".thwvsf-custom-table")).hide():(form.find($(".thwvsf-custom-table")).hide(),form.find($(".thwvsf-custom-table-"+type)).show(),form.find($(".th-tooltip-row")).show()),"select"==type?form.find($(".th-tooltip-row")).hide():form.find($(".th-tooltip-row")).show()}function open_term_body(elm,e){var element=$(elm),parent=$(elm).closest("td"),parent_table=$(elm).closest("table");element.hasClass("open")?(element.removeClass("open"),parent.find(".thwvsf-local-body").hide()):(parent_table.find(".thwvsf-local-body").hide(),parent.find(".thwvsf-local-body").show("slow"),parent_table.find(".thwvsf-local-head").removeClass("open"),element.addClass("open"))}function open_attribute_form(elm,id,design_type){var form=$("#thwvs_attribute_form_pp");open_design_popup(elm,form);var terms_json=$(elm).data("terms"),type=terms_json.type,name=terms_json.name,label=terms_json.label;form.find(".attr-label").text(label),thwvsf_base.set_property_field_value(form,"hidden","attr_id",id,0),thwvsf_base.set_property_field_value(form,"text","label",label,0),thwvsf_base.set_property_field_value(form,"text","name",name,0),thwvsf_base.set_property_field_value(form,"select","type",type,0),thwvsf_base.set_property_field_value(form,"select","swatch_design_style",design_type,0),populate_attribute_term_fields(form,terms_json,id,type),thwvsf_base.setupColorPicker(form)}function populate_attribute_term_fields(form,terms_json,id,attr_type){attr_type="image_with_label"===attr_type?"image":attr_type;var terms=terms_json.terms;populate_color_swatch_terms_html(terms,form),populate_label_swatch_terms_html(terms,form),populate_image_swatch_terms_html(terms,form),form.find(".thwvs_attribute_terms_settings").hide(),form.find("#thwvs_attribute_terms_"+attr_type).show()}function swatch_type_change_listener(elm){var type=$(elm).val(),form=$("#thwvs_attribute_form");form.find(".thwvs_attribute_terms_settings").hide(),form.find("#thwvs_attribute_terms_"+type).show()}function populate_color_swatch_terms_html(terms,form){var termHtml="";termHtml+='<tr><td class="terms-label" colspan="3">Set Terms Color</td> </tr>',jQuery.each(terms,function(key,value){termHtml+="<tr>",termHtml+='<td class="titledesc" style="width:35%">'+value.term_name+"</td>",termHtml+='<td style="width: 26px; padding:0px;"></td>',termHtml+='<td class ="forminp inp-color">',termHtml+='<input type="text" name="i_single_color_'+value.slug+'" value="'+value.color+'" style="width: 260px;" class="thpladmin-colorpick"/>',termHtml+='<span class="thwvs-admin-colorpickpreview thpladmin-colorpickpreview '+value.slug+'_preview"  style="background-color:'+value.color+'"></span>',termHtml+="</td>",termHtml+="</tr>"}),form.find("#thwvs_attribute_terms_color").html(termHtml)}function populate_image_swatch_terms_html(terms,form){var termHtml="",placeholder_image=thwvsf_var.placeholder_image,upload_img=thwvsf_var.upload_image,remove_img=thwvsf_var.remove_image;termHtml+='<tr><td class="terms-label" colspan="3">Set Terms Image</td> </tr>',jQuery.each(terms,function(key,value){var remove_icon_style=value.image?"":"display:none;",image=value.image?value.image:placeholder_image;termHtml+="<tr>",termHtml+='<td class="titledesc" style="width:35%">'+value.term_name+"</td>",termHtml+='<td style="width: 26px; padding:0px;"></td>',termHtml+="<td>",termHtml+='<div class = "thwvsf-upload-image"> <div class="tawcvs-term-image-thumbnail" style="float:left;margin-right:10px;">',termHtml+='<img  class="i_index_media_img" src="'+image+'" width="60px" height="60px" alt="term-image" />',termHtml+="</div>",termHtml+='<div style="line-height:30px;">',termHtml+='<input type="hidden" class="i_index_media"  name= "i_product_image_'+value.slug+'" value="'+value.term_value+'">',termHtml+='<button type="button" class="thwvs-upload-image-button button " onclick="thwvsf_upload_icon_image(this,event)">',termHtml+='<img class="thwvsf-upload-button" src="'+upload_img+'" alt="upload"></button>',termHtml+='<button type="button" style ="'+remove_icon_style+'"  class="thwvsf_remove_image_button button " onclick="thwvsf_remove_icon_image(this,event)">',termHtml+='<img class="thwvsf-remove-button" src="'+remove_img+'" alt="remove"></button>',termHtml+="</div>",termHtml+="</div>",termHtml+="</td>",termHtml+="</tr>"}),form.find("#thwvs_attribute_terms_image").html(termHtml)}function populate_label_swatch_terms_html(terms,form){var termHtml="";termHtml+='<tr><td class="terms-label" colspan="3">Set Terms Label</td> </tr>',jQuery.each(terms,function(key,value){termHtml+="<tr>",termHtml+='<td class="titledesc" style="width:35%">'+value.term_name+"</td>",termHtml+='<td style="width: 26px; padding:0px;"></td>',termHtml+='<td class ="forminp">',termHtml+='<input type="text" name="i_label_'+value.slug+'" value="'+value.label+'" style="width: 260px;" />',termHtml+="</td>",termHtml+="</tr>"}),termHtml+="</div>",form.find("#thwvs_attribute_terms_label").html(termHtml)}function edit_design_form(elm,design_styles,design_id,des_title){open_design_form("edit",design_styles,design_id,elm,des_title)}function open_design_form(type,valueJson,design_id,elm,des_title){des_title=$("<div/>").html(des_title).text();var container=$("#thwvs_design_form_pp"),form=$("#thwvs_design_form");populate_design_form(form,type,valueJson,container,des_title),form.find("input[name=thwvsf_design_id]").val(design_id),open_design_popup(elm,container),form.find("input[name=i_design_name]").val(des_title)}function populate_design_form(form,type,valueJson,container,des_title){var title="edit"===type&&des_title?des_title:"New Design Style";container.find(".pp-title").text(title),"new"===type?set_form_field_values(form,DESIGN_FORM_FIELDS,!1):set_form_field_values(form,DESIGN_FORM_FIELDS,valueJson)}function set_form_field_values(form,fields,valuesJson){valuesJson&&valuesJson.name&&valuesJson.name;$.each(fields,function(name,field){var type=field.type,value=valuesJson&&valuesJson[name]?valuesJson[name]:field.value,multiple=field.multiple?field.multiple:0;"checkbox"===type&&!valuesJson&&field.checked&&(value=field.checked),name=name,thwvsf_base.set_property_field_value(form,type,name,value,multiple)}),form.find("select[name=i_attr_selection_style]").change()}function open_design_popup(elm,popup){$(".popup-wrapper").hasClass("dismiss")&&$(".popup-wrapper").removeClass("dismiss").addClass("selected").show(),$(".thwvs-template-preview-wrapper .thwvs-template-box").removeClass("design-active"),$(".thwvs-design-templates.thwvs-template-popup").addClass("pop-active"),$(".product_page_th_product_variation_swatches_for_woocommerce").addClass("thwvs-body-deactive"),$(elm).closest(".thwvs-template-box").addClass("design-active"),popup.find("ul.pp_nav_tabs li").first().click()}function close_design_popup(elm){$(".popup-wrapper").hasClass("selected")&&$(".popup-wrapper").removeClass("selected").addClass("dismiss"),$(".thwvs-design-templates.thwvs-template-popup").removeClass("pop-active"),$(".product_page_th_product_variation_swatches_for_woocommerce").removeClass("thwvs-body-deactive"),$(".thwvs-template-preview-wrapper .thwvs-template-box").removeClass("design-active")}function trigger_attribute_tab(elm){$("ul.wc-tabs .attribute_options.attribute_tab a").trigger("click")}var mediaUploader;$(function(){$(document).on("click",".thwvsf-free-banner .notice-dismiss",function(){$.ajax({type:"POST",url:ajaxurl,data:{security:thwvsf_var.ajax_banner_nonce,action:"dismiss_thwvsf_upgrade_notice"},success:function(data){},error:function(){alert("error")}})});var settings_div=$("#edittag"),add_tag_div=$("#addtag"),advanced_settings_div=$("#advanced_settings_form"),custom_attr_div=$(".thwvsf-custom-table"),design_settings_div=$("#thwvs_design_form");thwvsf_base.setupColorPicker(advanced_settings_div),thwvsf_base.setupColorPicker(settings_div),thwvsf_base.setupColorPicker(add_tag_div),thwvsf_base.setupColorPicker(custom_attr_div),thwvsf_base.setupColorPicker(design_settings_div);$(".thwvsadmin-wrapper"),$("#last_active_tab").val();thwvsf_base.setup_form_side_popup()});var placeholder=thwvsf_var.placeholder_image,DESIGN_FORM_FIELDS={design_name:{name:"design_name",label:" Design Name",type:"text",value:""},icon_height:{name:"icon_height",type:"text",value:"45px"},icon_width:{name:"icon_height",type:"text",value:"45px"},icon_shape:{name:"icon_shape",type:"select",value:"0px"},icon_label_height:{name:"icon_height",type:"text",value:"45px"},icon_label_width:{name:"icon_height",type:"text",value:"45px"},label_size:{name:"label_size",type:"text",value:"16px"},label_background_color:{name:"label_background_color",type:"colorpicker",value:"#fff"},label_text_color:{name:"label_text_color",type:"colorpicker",value:"#000"},icon_border_color_hover:{name:"icon_border_color_hover",type:"colorpicker",value:"#aaaaaa"},icon_border_color_selected:{name:"icon_border_color_selected",type:"colorpicker",value:"#827d7d"},tooltip_enable:{name:"tooltip_enable",type:"checkbox",value:0},tooltip_text_background_color:{name:"tooltip_text_background_color",type:"colorpicker",value:"#000000"},tooltip_text_color:{name:"tooltip_text_color",type:"colorpicker",value:"#ffffff"}};return $(document).ajaxComplete(function(event,request,options){if(request&&4===request.readyState&&200===request.status&&options.data&&0<=options.data.indexOf("action=add-tag")){var res=wpAjax.parseAjaxResponse(request.responseXML,"ajax-response");if(!res||res.errors)return;return $(".i_index_media_img").attr("src",placeholder),$(".i_index_media").val(""),$("#product_cat_thumbnail_id").val(""),$(".thwvsf_remove_image_button").hide(),void $(".thwvsf_settings_fields_form").find(".thpladmin-colorpickpreview").css("background-color","")}if(request&&4===request.readyState&&200===request.status&&options.data&&0<=options.data.indexOf("action=woocommerce_save_attributes")){var this_page=window.location.toString();this_page=this_page.replace("post-new.php?","post.php?post="+woocommerce_admin_meta_boxes.post_id+"&action=edit&");$(".thwvs-custom-table");$("#thwvs-product-attribute-settings").load(this_page+" #custom_variations_inner",function(){$("#thwvs-product-attribute-settings").trigger("reload"),thwvsf_base.setupColorPicker($(".th-custom-attr-color-td")),$("#thwvs-product-attribute-settings").trigger("init_tooltips")})}}),{upload_icon_image:upload_icon_image,remove_icon_image:remove_icon_image,change_term_type:change_term_type,open_term_body:open_term_body,EditDesignForm:edit_design_form,CloseDesignPopup:close_design_popup,TriggerAttributeTab:trigger_attribute_tab,OpenAttributeForm:open_attribute_form,SwatchTypeChangeListner:swatch_type_change_listener}}(window.jQuery,window,document);jQuery(function($){"use strict";function save_new_term($wrapper,$dialog,attribute){var new_attribute_name="",term_spec={};if(new_attribute_name=$dialog.find('input[name = "attribute_name"]').val(),term_spec["product_"+attribute]=$dialog.find('input[name = "attribute_type"]').val(),new_attribute_name){var ajax_data=_extends({action:"woocommerce_add_new_attribute",taxonomy:attribute,term:new_attribute_name,security:woocommerce_admin_meta_boxes.add_attribute_nonce},term_spec);$.post(woocommerce_admin_meta_boxes.ajax_url,ajax_data,function(response){response.error?window.alert(response.error):response.slug&&($wrapper.find("select.attribute_values").append('<option value="'+response.term_id+'" selected="selected">'+response.name+"</option>"),$wrapper.find("select.attribute_values").change()),$(".product_attributes").unblock()})}else $(".product_attributes").unblock()}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};$(".product_attributes").on("click","button.thwvsf_add_new_attribute",function(event){event.preventDefault(),$(".thwvsf-class").val("");var placeholder=thwvsf_var.placeholder_image;$(".i_index_media_img").attr("src",placeholder),$(".thpladmin-colorpickpreview").css("background-color","");var popup_outer=$(".thwvsf-attribte-dialog");if(popup_outer.find("input[type=text]").val(""),popup_outer.hasClass("thwvsf-attribte-dialog-image")){popup_outer.find(".thwvsf_remove_image_button").hide()}var $wrapper=$(this).closest(".woocommerce_attribute"),attribute=$wrapper.data("taxonomy"),type=($(this).data("attr_taxonomy"),$(this).data("attr_type")),settings_div=$(".thwvsf_settings_fields_form");thwvsf_base.setupColorPicker(settings_div);var $popup_div=$(".thwvsf-attribte-dialog-"+type),height="color"==type?395:250;$popup_div.length>0&&($popup_div.dialog({dialogClass:"wp-dialog thwvsf-popup",title:"Add new term",modal:!0,autoOpen:!1,width:500,minHeight:height,buttons:[{text:"save",class:"button_class",click:function(){save_new_term($wrapper,$(this),attribute),$(this).dialog("close")}}]}),$(".product_attributes").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),$popup_div.dialog("open"),$(".product_attributes").unblock(),$(".ui-dialog.thwvsf-popup").css("z-index",99999999))})});