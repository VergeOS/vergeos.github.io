!function(){var e,n,x=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},b=[].slice;e=this,n=function(c,o){var e,h,d,r,i,l,s,p,a,n,y,v,w,g,u,f;function S(t){var e=this;this.$element=t,this.element=t[0],this.didResize=!1,this.didScroll=!1,this.id="context"+i++,this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()},this.waypoints={horizontal:{},vertical:{}},t.data(l,this.id),s[this.id]=this,t.bind(v,function(){if(!e.didScroll&&!p)return e.didScroll=!0,o.setTimeout(function(){return e.doScroll(),e.didScroll=!1},c[f].settings.scrollThrottle)}),t.bind(y,function(){if(!e.didResize)return e.didResize=!0,o.setTimeout(function(){return c[f]("refresh"),e.didResize=!1},c[f].settings.resizeThrottle)})}function t(t,e,n){"bottom-in-view"===(n=c.extend({},c.fn[u].defaults,n)).offset&&(n.offset=function(){var t=c[f]("viewportHeight");return(t=!c.isWindow(e.element)?e.$element.height():t)-c(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=n.horizontal?"horizontal":"vertical",this.callback=n.handler,this.context=e,this.enabled=n.enabled,this.id="waypoints"+w++,this.offset=null,this.options=n,e.waypoints[this.axis][this.id]=this,r[this.axis][this.id]=this,(n=null!=(n=t.data(g))?n:[]).push(this.id),t.data(g,n)}return e=c(o),p=0<=x.call(o,"ontouchstart"),r={horizontal:{},vertical:{}},s={},l="waypoints-context-id",y="resize.waypoints",v="scroll.waypoints",w=i=1,g="waypoints-waypoint-ids",u="waypoint",f="waypoints",S.prototype.doScroll=function(){var o=this,t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};return!p||t.vertical.oldScroll&&t.vertical.newScroll||c[f]("refresh"),c.each(t,function(t,i){var r=[],e=i.newScroll>i.oldScroll,n=e?i.forward:i.backward;return c.each(o.waypoints[t],function(t,e){var n;return i.oldScroll<(n=e.offset)&&n<=i.newScroll||i.newScroll<(n=e.offset)&&n<=i.oldScroll?r.push(e):void 0}),r.sort(function(t,e){return t.offset-e.offset}),e||r.reverse(),c.each(r,function(t,e){if(e.options.continuous||t===r.length-1)return e.trigger([n])})}),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},S.prototype.refresh=function(){var e=this,t=c.isWindow(this.element),n=this.$element.offset();return this.doScroll(),n={horizontal:{contextOffset:t?0:n.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:n.top,contextScroll:t?0:this.oldScroll.y,contextDimension:t?c[f]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},c.each(n,function(t,s){return c.each(e.waypoints[t],function(t,e){var n,i,r=e.options.offset,o=e.offset,l=c.isWindow(e.element)?0:e.$element.offset()[s.offsetProp];if(c.isFunction(r)?r=r.apply(e.element):"string"==typeof r&&(r=parseFloat(r),-1<e.options.offset.indexOf("%")&&(r=Math.ceil(s.contextDimension*r/100))),e.offset=l-s.contextOffset+s.contextScroll-r,(!e.options.onlyOnScroll||null==o)&&e.enabled)return null!==o&&o<(n=s.oldScroll)&&n<=e.offset?e.trigger([s.backward]):null!==o&&o>(i=s.oldScroll)&&i>=e.offset||null===o&&s.oldScroll>=e.offset?e.trigger([s.forward]):void 0})})},S.prototype.checkEmpty=function(){if(c.isEmptyObject(this.waypoints.horizontal)&&c.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([y,v].join(" ")),delete s[this.id]},h=S,t.prototype.trigger=function(t){if(this.enabled)return null!=this.callback&&this.callback.apply(this.element,t),this.options.triggerOnce?this.destroy():void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},t.prototype.destroy=function(){return delete r[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},t.getWaypointsByElement=function(t){var e,t=c(t).data(g);return t?(e=c.extend({},r.horizontal,r.vertical),c.map(t,function(t){return e[t]})):[]},d=t,n={init:function(t,i){return null==(i=null==i?{}:i).handler&&(i.handler=t),this.each(function(){var t,e=c(this),n=null!=(n=i.context)?n:c.fn[u].defaults.context;return c.isWindow(n)||(n=e.closest(n)),n=c(n),t=(t=s[n.data(l)])||new h(n),new d(e,t,i)}),c[f]("refresh"),this},disable:function(){return n._invoke(this,"disable")},enable:function(){return n._invoke(this,"enable")},destroy:function(){return n._invoke(this,"destroy")},prev:function(t,e){return n._traverse.call(this,t,e,function(t,e,n){if(0<e)return t.push(n[e-1])})},next:function(t,e){return n._traverse.call(this,t,e,function(t,e,n){if(e<n.length-1)return t.push(n[e+1])})},_traverse:function(e,t,n){var i,r;return null==e&&(e="vertical"),r=a.aggregate(t=null==t?o:t),i=[],this.each(function(){var t=c.inArray(this,r[e]);return n(i,t,r[e])}),this.pushStack(i)},_invoke:function(t,n){return t.each(function(){var t=d.getWaypointsByElement(this);return c.each(t,function(t,e){return e[n](),!0})}),this}},c.fn[u]=function(){var t=arguments[0],e=2<=arguments.length?b.call(arguments,1):[];return n[t]?n[t].apply(this,e):c.isFunction(t)?n.init.apply(this,arguments):c.isPlainObject(t)?n.init.apply(this,[null,t]):t?c.error("The "+t+" method does not exist in jQuery Waypoints."):c.error("jQuery Waypoints needs a callback function or handler option.")},c.fn[u].defaults={context:o,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},a={refresh:function(){return c.each(s,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return null!=(t=o.innerHeight)?t:e.height()},aggregate:function(t){var e,i=r;return(i=t?null!=(t=s[c(t).data(l)])?t.waypoints:void 0:i)?(e={horizontal:[],vertical:[]},c.each(e,function(t,n){return c.each(i[t],function(t,e){return n.push(e)}),n.sort(function(t,e){return t.offset-e.offset}),e[t]=c.map(n,function(t){return t.element}),e[t]=c.unique(e[t])}),e):[]},above:function(t){return a._filter(t=null==t?o:t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){return a._filter(t=null==t?o:t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){return a._filter(t=null==t?o:t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){return a._filter(t=null==t?o:t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return a._invoke("enable")},disable:function(){return a._invoke("disable")},destroy:function(){return a._invoke("destroy")},extendFn:function(t,e){return n[t]=e},_invoke:function(n){var t=c.extend({},r.vertical,r.horizontal);return c.each(t,function(t,e){return e[n](),!0})},_filter:function(t,e,n){var i,r=s[c(t).data(l)];return r?(i=[],c.each(r.waypoints[e],function(t,e){if(n(r,e))return i.push(e)}),i.sort(function(t,e){return t.offset-e.offset}),c.map(i,function(t){return t.element})):[]}},c[f]=function(){var t=arguments[0],e=2<=arguments.length?b.call(arguments,1):[];return a[t]?a[t].apply(null,e):a.aggregate.call(null,t)},c[f].settings={resizeThrottle:100,scrollThrottle:30},e.load(function(){return c[f]("refresh")})},"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(t){return n(t,e)}):n(e.jQuery,e)}.call(this);