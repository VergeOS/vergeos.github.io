"use strict";function _createForOfIteratorHelper(e,t){var n,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}window.onload=function(){document.body.style.display="block"},function(q){q(document).ready(function(){q(window).on("load",function(){var c,h,b,w,f,g,e,n,t=q("body"),u=q("#wn-header-builder"),a=u.find(".whb-elements-place"),l=u.find(".whb-desktop-panel").find('.whb-columns[data-columns="row1"]').find(".whb-elements-place"),p=whb_localize.components&&!Array.isArray(whb_localize.components)?whb_localize.components:{},m=whb_localize.editor_components||{},v=whb_localize.frontend_components||{},y={"desktop-view":{},"tablets-view":{},"mobiles-view":{}},i=!1;function _(){console.log("%c Components:","font-size: 18px; background: #EC9787; color: #fff;",p),console.log("%c Editor Components:","font-size: 18px; background: #6F9FD8; color: #fff;",m),console.log("%c Frontend Components:","font-size: 18px; background: #ECDB54; color: #fff;",v)}function s(e){try{JSON.parse(e)}catch(e){return}return 1}function o(){return!!t.hasClass("whb-frontend-builder-wrap")}for(e in _(),p)p.hasOwnProperty(e)&&!function(){var t=p[e];-1!=e.search("logo")&&(n=e.slice("5"),u.find('.whb-elements-item[data-element="logo"][data-unique-id="'+n+'"]').each(function(){var e=q(this);wp.media.attachment(t.logo).fetch().done(function(){e.children("a").hide().after('<img class="whb-img-placeholder-el" src="'+this.attributes.url+'" alt="">')})}))}();var d,r=q(document).height();function C(i,l,e){var s=2<arguments.length&&void 0!==e&&e,o=i.attr("data-element"),d=i.attr("data-unique-id"),r=o+"_"+d;p.hasOwnProperty(r)||(p[r]={}),0<!u.children(".whb-spinner-wrap").length&&u.prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),q.ajax({type:"POST",url:whb_localize.ajaxurl,data:{action:"whb_get_component_fields",el_name:o,nonce:whb_localize.nonce},success:function(e){0<u.children(".whb-spinner-wrap").length&&u.children(".whb-spinner-wrap").remove(),q(".wn-header-builder-wrap").append(e),(h=u.find('.whb-modal-wrap[data-element-target="'+o+'"]')).find(".whb-tabs-list").find("li").removeClass("w-active"),h.find(".whb-tab-panel").hide(),h.find(".whb-tabs-list").find("li:first").addClass("w-active"),h.find(".whb-modal-contents").children(".whb-tab-panel:first").show();var t,e=h.find(".whb-modal-contents").children(".whb-tab-panel");if("desktop-view"==l?e.find('.whb-tab-panel[data-id="#all"]').show():"tablets-view"==l?e.find('.whb-tab-panel[data-id="#tablets"]').show():"mobiles-view"==l?e.find('.whb-tab-panel[data-id="#mobiles"]').show():"sticky-view"==l&&e.find('.whb-tab-panel[data-id="#all"]').show(),e.find(".whb-tab-panel").find(".whb-tab-panel:first").show(),h.show(),h.find(".whb-field").each(function(){var e=q(this).find(".whb-field-input"),t=e.data("field-name"),n=void 0!==(n=e.data("field-std"))?n:"";e.hasClass("whb-field-textarea")?e.val(p[r][t]).val(p[r][t]):void 0!==p[r][t]?e.val(p[r][t]):(e.val(n).val(n),n&&(p[r][t]=n))}),s){var n=i.find("a").find("i").attr("class");if("sticky-view"==l)m[l][w][b].push({name:o,uniqueId:d,hidden_element:!1,editor_icon:n});else for(var a in y)m[a][w][b].push({name:o,uniqueId:d,hidden_element:!1,editor_icon:n})}(e=q(".whb-modal-wrap")).find(".whb-switcher").find(".whb-field-input").on("change",function(){var e=q(this);e.is(":checked")?(e.attr("value","true"),e.attr("checked","checked")):(e.attr("value","false"),e.removeAttr("checked"))}),e.find(".whb-attach-image").each(function(){var n,a=q(this),e=a.find(".whb-add-image"),i=a.find(".whb-remove-image"),l=a.find(".whb-preview-image");e.on("click",function(e){e.preventDefault();var t=a.find("input.whb-attach-image");t.val();n||(n=wp.media({multiple:!1})).on("select",function(){var e=n.state().get("selection").first().toJSON();l.html("").append('<img src="'+e.url+'" alt="">').css("display","block"),t.val(e.id).trigger("input"),i.show()}),n.open()}),i.on("click",function(e){e.preventDefault();e=a.find("input.whb-attach-image");l.html("").hide(),i.hide(),e.attr("value","").trigger("input")})}),e.find(".whb-number-unit").each(function(){var n=q(this),a=n.find('input[type="number"]'),i=n.find(".whb-opts").children("span"),l=n.find(".whb-field-input");i.on("click",function(e){e.preventDefault();var e=q(this),t=e.data("value"),n=a.val();i.removeClass("whb-active"),e.addClass("whb-active"),n&&l.attr("value",n+t).trigger("input")}),a.on("change",function(e){e.preventDefault();q(this);var e=n.find(".whb-opts").children("span.whb-active").data("value"),t=a.val();(t?l.attr("value",t+e):l.attr("value","")).trigger("input")})}),e.find(".whb-custom-select").find(".whb-opts").find("span").on("click",function(){var e=q(this),t=e.closest(".whb-custom-select"),n=t.find(".whb-opts").children("span"),t=t.find(".whb-field-input"),a=e.data("value");n.removeClass("whb-active"),e.addClass("whb-active"),t.val(a).trigger("input")}),e.find(".whb-field-icons-wrap").each(function(){var e=q(this),n=e.find(".wn-icon").find("label"),a=e.find(".whb-field-input");n.on("click",function(e){e.preventDefault();var e=q(this),t=e.attr("for");n.removeClass("whb-active"),e.addClass("whb-active"),a.attr("value",t).trigger("input")})}),e.find(".whb-color-picker").wpColorPicker(),e.find(".whb-field").find(".whb-field-input").each(function(){var n,e,t,a,i,l,s,o=q(this);o.hasClass("whb-switcher-field")&&("true"==o.val()?o.attr("checked","checked").trigger("input"):o.removeAttr("checked")),o.hasClass("whb-field-custom-select")&&o.siblings(".whb-opts").find("span").each(function(){var e=q(this);e.removeClass("whb-active"),e.data("value")==o.val()&&e.addClass("whb-active")}),o.hasClass("whb-field-number-unit")&&((e=o.val())?(t=(i=o.closest(".whb-number-unit")).find('input[type="number"]'),i=i.find(".whb-opts").children("span"),a=parseFloat(e),n=e.split(a)[1],t.val(a).trigger("input"),i.each(function(){var e=q(this),t=e.data("value");e.removeClass("whb-active"),t==n&&e.addClass("whb-active")})):o.closest(".whb-number-unit").find('input[type="number"]').val("")),o.hasClass("whb-icon-field")&&(e=o.val(),a=(t=o.closest(".whb-field-icons-wrap")).find(".wn-icon").find("label"),e?(a.removeClass("whb-active"),t.find(".wn-icon").find('label[for="'+e+'"]').addClass("whb-active")):a.removeClass("whb-active")),o.hasClass("whb-attach-image")&&(i=o.val(),l=o.siblings(".whb-remove-image"),s=o.siblings(".whb-preview-image"),i&&!wp.media.attachment(i).destroyed?(0<!h.find(".whb-modal-contents").find(".whb-spinner-wrap").length&&h.find(".whb-modal-contents").prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),wp.media.attachment(i).fetch().always(function(){0<h.find(".whb-modal-contents").find(".whb-spinner-wrap").length&&h.find(".whb-modal-contents").find(".whb-spinner-wrap").remove(),s.html(""),null!=this.attributes.url&&(s.append('<img src="'+this.attributes.url+'" alt="">').css("display","block"),l.show())})):(s.html("").hide(),l.hide()))}),h.find(".whb-dependency").on("change",function(){!function l(e){var t=e.data("dependency");var s=e.find(".whb-field-input").val();q.each(t,function(e,t){for(var n=0;n<t.length;n++){var a=h.find('.whb-field-input[data-field-name="'+t[n]+'"]').closest(".whb-field").hide(),i="whb-field w-col-sm-12 whb-dependency"==a.attr("class");e==s?(a.show(),i&&l($el)):i&&q.each(a.data("dependency"),function(e,t){for(var n=0;n<t.length;n++)h.find('.whb-field-input[data-field-name="'+t[n]+'"]').closest(".whb-field").hide()})}})}(q(this))}),h.find(".whb-dependency").trigger("change"),s&&(t=i[0].outerHTML,q('.whb-elements-item[data-element="'+o+'"][data-unique-id="'+d+'"]').each(function(){q(this).replaceWith(t)})),k(h[0])}}),_()}function k(t){var n=0,a=0,i=0,l=0;function e(e){e=e||window.event,i=e.clientX,l=e.clientY,document.onmouseup=o,document.onmousemove=s}function s(e){e=e||window.event,n=i-e.clientX,a=l-e.clientY,i=e.clientX,l=e.clientY,t.style.top=t.offsetTop-a+"px",t.style.left=t.offsetLeft-n+"px"}function o(){document.onmouseup=null,document.onmousemove=null}t.getElementsByClassName("whb-modal-header")?t.getElementsByClassName("whb-modal-header")[0].onmousedown=e:t.onmousedown=e}function x(e){var t=window.frames.whbIframe.document.getElementsByTagName("head")[0],n=document.createElement("script");n.src=e,t.appendChild(n)}function S(){var n=q("#whbIframe").contents().find("#webnus-header-builder");0==n.children(".whb-spinner-wrap").length&&n.prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),o()&&q(".whb_save").css({"background-color":"#4cbf67","box-shadow":"0 3px 10px -3px #4cbf67","border-color":"#4cbf67"}),q.ajax({type:"POST",url:whb_localize.ajaxurl,data:{action:"whb_save_data",nonce:whb_localize.nonce,frontendComponents:JSON.stringify(v)},success:function(e){var t;o()&&(q(".whb_save").css({"background-color":"#07bbe9","box-shadow":"0 3px 10px -3px #07bbe9","border-color":"#07bbe9"}),0==(e=q(e)).children(".whb-spinner-wrap").length&&e.prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),n[0].outerHTML=e[0].outerHTML),i?q('.redux-action_bar input[name="redux_save"], #whb-publish').trigger("click"):o()&&q.ajax({type:"POST",url:whb_localize.ajaxurl,data:{action:"whb_live_dynamic_styles",nonce:whb_localize.nonce},success:function(e){e=e,window.frames.whbIframe.document.getElementById("whb-enqueue-dynamic-style").children[0].innerHTML=e,q("#whbIframe").contents().find("#webnus-header-builder").children(".whb-spinner-wrap").remove()}}),o()&&(x((e=whb_localize.assets_url+"src/frontend/")+(t=["whb-jquery-plugins.js","whb-frontend.js"])[0]),x(e+t[1]))}})}function O(){for(var e in v=q.extend(!0,{},m))for(var t in v[e])for(var c in v[e][t]){var n,a,i=v[e][t][c];if("settings"==c)for(n in(s=i.element+"_"+i.uniqueId)in p&&Object.assign(i,p[s]),i)i.hasOwnProperty(n)&&(a=i[n],"hidden_element"!=n&&"boolean"==typeof a&&(i[n]=String(a)));else if(0!=i.length){var h,l=_createForOfIteratorHelper(i);try{for(l.s();!(h=l.n()).done;){var s,o,d,r=h.value;for(o in(s=r.name+"_"+r.uniqueId)in p&&Object.assign(r,p[s]),r)r.hasOwnProperty(o)&&(d=r[o],"hidden_element"!=o&&"boolean"==typeof d&&(r[o]=String(d)))}}catch(e){l.e(e)}finally{l.f()}}}}function D(e){I(e.target.result)}function I(e){e&&(s(e)||e===Object(e))?(t.css({height:"1px",overflow:"hidden"}).prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),q("#wpwrap").css("display","none"),e=s(e)?JSON.parse(e):e,p=e.whb_data_components,m=e.whb_data_editor_components,v=e.whb_data_frontend_components,i=!0,S()):alert("Header import input is empty! That's why no data can import.")}q("#whbIframe").css("height",r),q("#whbIframe").contents().find("a").on("click",function(){return!1}),u.find(".whb-tab-panel"+u.find(".whb-tabs-list").find("li.w-active").find("a").attr("href")).show(),u.on("click",".whb-tabs-list a",function(e){e.preventDefault();var e=q(this),t=e.parent(),n=e.closest("ul").find("li"),a=e.closest("ul");t.hasClass("w-active")||(n.removeClass("w-active"),t.addClass("w-active"),a.hasClass("whb-element-groups")?u.find(".whb-group-panel").hide().end().find('.whb-group-panel[data-id="'+e.attr("href")+'"]').show():a.hasClass("whb-styling-groups")?a.siblings(".whb-styling-group-panel").hide().end().siblings('.whb-styling-group-panel[data-id="'+e.attr("href")+'"]').show():a.hasClass("whb-styling-screens")?u.find(".whb-styling-screen-panel").hide().end().find('.whb-styling-screen-panel[data-id="'+e.attr("href")+'"]').show():u.find(".whb-tab-panel:not(.whb-group-panel)").hide().end().find(".whb-tab-panel"+e.attr("href")).fadeIn(300))}),q("#whb-desktop-tab, #whb-sticky-tab").on("click",function(e){e.preventDefault(),t.removeClass("whb-tablets-device whb-mobiles-device"),q(".whb-screen-view").hide(),q(".whb-desktop-view, .whb-sticky-view").show()}),q("#whb-tablets-tab").on("click",function(e){e.preventDefault(),t.removeClass("whb-mobiles-device"),t.addClass("whb-tablets-device"),q(".whb-screen-view").hide(),q(".whb-tablets-view").show()}),q("#whb-mobiles-tab").on("click",function(e){e.preventDefault(),t.removeClass("whb-tablets-device"),t.addClass("whb-mobiles-device"),q(".whb-screen-view").hide(),q(".whb-mobiles-view").show()}),u.find(".whb-full-modal-btn").on("click",function(e){e.preventDefault();e=q(this).data("modal-target"),e=u.find('.whb-full-modal[data-modal="'+e+'"]');t.css("overflow","hidden"),e.find("textarea").val(" "),e.fadeIn(200)}),u.find(".whb-full-modal-close").on("click",function(e){e.preventDefault(),t.css("overflow","initial"),u.find(".whb-full-modal").hide()}),u.find(".whb-full-modal").on("click",function(e){e.preventDefault(),t.css("overflow","initial"),u.find(".whb-full-modal").hide()}),u.on("click",".w-add-element",function(e){e.preventDefault();e=q(this);u.find(".whb-elements").show(),f=e.closest(".whb-tab-panel").attr("id"),w=e.closest(".whb-columns").attr("data-columns"),b=e.attr("data-align-col")}),u.on("click",".whb-modal-header i, .whb_close",function(e){e.preventDefault(),u.find(".whb-modal-wrap").hide(),u.find(".whb-modal-wrap[data-element-target]").remove()}),u.find(".whb-modal-wrap").on("click",".whb-elements-item a",function(e){e.preventDefault();var e=q(this),t=(new Date).valueOf(),n=q(this).find("i").attr("class"),a='<span class="whb-controls">\n\t\t\t\t\t\t\t\t\t\t<span class="whb-tooltip tooltip-on-top" data-tooltip="Copy to Clipboard">\n\t\t\t\t\t\t\t\t\t\t\t<i class="whb-control whb-copy-btn ti-files"></i>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class="whb-tooltip tooltip-on-top" data-tooltip="Settings">\n\t\t\t\t\t\t\t\t\t\t\t<i class="whb-control whb-edit-btn sl-pencil"></i>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class="whb-tooltip tooltip-on-top" data-tooltip="Hide">\n\t\t\t\t\t\t\t\t\t\t\t<i class="whb-control whb-hide-btn ti-eye"></i>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class="whb-tooltip tooltip-on-top" data-tooltip="Remove">\n\t\t\t\t\t\t\t\t\t\t\t<i class="whb-control whb-delete-btn ti-close"></i>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</span>';if(e.closest(".whb-elements-item").hasClass("whb-clipboard-item")){var i,l,s=e.parent(),o=s.data("element"),d=o+"_"+s.data("unique-id").toString(),r=o+"_"+t;for(i in p)p.hasOwnProperty(i)&&(l=q.extend(!0,{},p[i]),d==i&&(p[r]=l));c=g.clone().removeClass("w-col-sm-4").attr({"data-unique-id":t}).prepend(a)}else c=e.parent().clone().removeClass("w-col-sm-4").attr({"data-unique-id":t,"data-hidden_element":!1,"data-editor_icon":n}).prepend(a);u.find('.whb-columns[data-columns="'+w+'"]').find(".whb-col.col-"+b).find(".whb-elements-place").append(c),u.find(".whb-modal-wrap").hide(),C(c,f,!0)}),u.on("click",".whb-copy-btn",function(e){e.preventDefault();e=q(this).closest(".whb-elements-item").clone();g=e.clone(),q(".whb-clipboard-item").remove(),e.removeClass("ui-sortable-handle").addClass("w-col-sm-4 whb-clipboard-item"),e.children(".whb-controls").remove().end().children("img").remove(),e.children("a").css({display:"block","background-color":"#e3e3e3"}),e.find("i").removeClass("ti-control-record").addClass("ti-clipboard").css("color","#f60"),e.find(".whb-element-name").text("Paste (Clipboard)"),q(".whb-modal-wrap.whb-elements").find(".whb-modal-contents").prepend(e)}),u.on("click",".whb-delete-btn",function(e){if(e.preventDefault(),confirm("Press OK to delete element, Cancel to leave")){var e=q(this).closest(".whb-elements-item"),t=e.data("element"),l=e.data("unique-id").toString(),n=t+"_"+l;if(f=e.closest(".whb-tab-panel").attr("id"),w=e.closest(".whb-columns").attr("data-columns"),b=e.closest(".whb-col").attr("data-align-col"),delete p[n],"sticky-view"==f)for(var a=m[f][w][b],i=0;i<a.length;i++)a[i].uniqueId==l&&a.splice(i,1);else for(var s in y){var o=m[s];!function(){for(var e in o){var t,n=o[e];for(t in n)for(var a=n[t],i=0;i<a.length;i++)if(a[i].uniqueId==l)return a.splice(i,1)}}()}O(),S(),_(),u.find('.whb-elements-item[data-element="'+t+'"][data-unique-id="'+l+'"]').remove()}}),u.on("click",".whb-edit-btn",function(e){e.preventDefault();e=q(this);u.find(".whb-modal-wrap").hide(),u.find(".whb-modal-wrap[data-element-target]").remove(),c=e.closest(".whb-elements-item"),f=e.closest(".whb-tab-panel").attr("id"),C(c,f)}),u.find(".whb-tabs-panels").find(".whb-columns").children('.whb-elements-item[data-hidden_element="true"]').find("i.whb-hide-btn").removeClass("ti-eye").addClass("wn-far wn-fa-eye-slash").closest(".whb-columns").addClass("whb-columns-hidden").css("opacity","0.45"),u.find(".whb-elements-place").find('.whb-elements-item[data-hidden_element="true"]').find("i.whb-hide-btn").removeClass("ti-eye").addClass("wn-far wn-fa-eye-slash"),u.on("click",".whb-hide-btn",function(e){e.preventDefault();var t,e=q(this),n=e.closest(".whb-elements-item"),a=n.data("element"),i=n.data("unique-id").toString();if(f=n.closest(".whb-tab-panel").attr("id"),w=n.closest(".whb-columns").attr("data-columns"),b=n.closest(".whb-col").attr("data-align-col"),"header-area"==a||"sticky-area"==a){a=m[f][w].settings.hidden_element,a=(m[f][w].settings.hidden_element=!a,n.attr("data-hidden_element",t=!a).data("hidden_element",!a),n.closest(".whb-columns"));t?(e.removeClass("ti-eye").addClass("wn-far wn-fa-eye-slash"),a.addClass("whb-columns-hidden").css("opacity","0.45")):(e.removeClass("wn-far wn-fa-eye-slash").addClass("ti-eye"),a.removeClass("whb-columns-hidden").css("opacity","1"))}else{for(var l=m[f][w][b],s=0;s<l.length;s++){var o=l[s];if(o.uniqueId==i){o.hidden_element=!o.hidden_element,t=o.hidden_element,n.attr("data-hidden_element",o.hidden_element).data("hidden_element",o.hidden_element);break}}t?(e.removeClass("ti-eye").addClass("wn-far wn-fa-eye-slash"),n.find("a").css("color","#888"),n.addClass("whb-columns-hidden").css("opacity","0.45")):(e.removeClass("wn-far wn-fa-eye-slash").addClass("ti-eye"),n.find("a").css("color","#0073aa"),n.removeClass("whb-columns-hidden").css("opacity","1"))}O(),S(),_()}),u.on("click",".whb_save",function(e){e.preventDefault();q(this);var e=c.data("element"),t=c.data("unique-id"),n=e+"_"+t,a=(h.find(".whb-field").each(function(){var e=q(this).find(".whb-field-input"),t=e.data("field-name"),e=e.val();""==e?p[n].hasOwnProperty(t)&&(p[n][t]=e):null!=e&&("string"==typeof e&&-1!=e.indexOf('"')&&(e=e.replace(/"/g,"'")),p[n][t]=e)}),O(),S(),_(),c[0].outerHTML),i=u.find('.whb-elements-item[data-element="'+e+'"][data-unique-id="'+t+'"]');i.each(function(){q(this).replaceWith(a)}),i=u.find('.whb-elements-item[data-element="'+e+'"][data-unique-id="'+t+'"]'),h.find(".whb-field.whb-placeholder").each(function(){var e,t=q(this);t.hasClass("whb-img-placeholder")&&((e=t.find(".whb-field-input").val())?wp.media.attachment(e).fetch().done(function(){0<!i.children(".whb-img-placeholder-el").length?i.attr("data-img-placeholder",e).children("a").hide().after('<img class="whb-img-placeholder-el" src="'+this.attributes.url+'" alt="" />'):i.children(".whb-img-placeholder-el").attr("src",this.attributes.url)}):i.removeAttr("data-img-placeholder").children("a").show().end().children(".whb-img-placeholder-el").remove()),t.hasClass("whb-text-placeholder")&&((t=t.find(".whb-field-input").val()).trim()?0<!i.find("a").find(".whb-text-placeholder-el").length?i.find("a").find(".whb-element-name").hide().after('<span class="whb-text-placeholder-el">'+t+"</span>"):i.find("a").find(".whb-text-placeholder-el").html(t):i.find("a").find("span.whb-element-name").show().end().end().find(".whb-text-placeholder-el").remove())}),o()||(u.find(".whb-modal-wrap").hide(),u.find(".whb-modal-wrap[data-element-target]").remove())}),a.sortable({connectWith:".whb-elements-place",placeholder:"ui-sortable-placeholder",forcePlaceholderSize:!0,tolerance:"pointer",start:function(e,t){t=q(t.item);f=t.closest(".whb-tab-panel").attr("id"),w=t.closest(".whb-columns").attr("data-columns"),b=t.closest(".whb-col").attr("data-align-col")},beforeStop:function(e,t){for(var n=q(t.item),t=n.closest(".whb-elements-place"),a=(n.data("element"),n.data("unique-id").toString()),i=m[f][w][b],l=0;l<i.length;l++)i[l].uniqueId==a&&i.splice(l,1);w=n.closest(".whb-columns").attr("data-columns"),b=n.closest(".whb-col").attr("data-align-col");t=t.children(".whb-elements-item").map(function(e,t){return{name:(n=q(t)).data("element"),uniqueId:n.data("unique-id").toString(),hidden_element:JSON.parse(n.data("hidden_element")),editor_icon:n.data("editor_icon")}}).get();m[f][w][b]=t,O(),S(),_()}}).disableSelection(),k(q(".whb-modal-wrap")[0]),q('.redux-action_bar input[name="redux_save"], #whb-publish').on("click",function(e){e.preventDefault(),0==u.children(".whb-spinner-wrap").length&&u.prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>');var t=q("#whbIframe").contents().find("#webnus-header-builder");0==t.children(".whb-spinner-wrap").length&&t.prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),q.ajax({type:"POST",url:whb_localize.ajaxurl,data:{action:"whb_publish",nonce:whb_localize.nonce,components:JSON.stringify(p),editorComponents:JSON.stringify(m),frontendComponents:JSON.stringify(v)},success:function(e){console.log(e),u.children(".whb-spinner-wrap").remove(),t.children(".whb-spinner-wrap").remove(),i&&location.reload()}})}),q(".whb-action-collapse").on("click",function(){var e=q(this),t=q(".wn-header-builder-wrap.whb-frontend-builder").css("bottom","-60%"),n=q(".whb-actions").css("bottom","0");e.hasClass("whb-open")?(t.css("bottom","-60%"),n.css("bottom","0"),e.removeClass("whb-open"),e.children("i").attr("class","ti-arrow-circle-up")):(t.css("bottom","0"),n.css("bottom","60%"),e.addClass("whb-open"),e.children("i").attr("class","ti-arrow-circle-down"))}),q("#whb-import").change(function(e){var t=event.target.files[0],n=new FileReader;n.onload=D,n.readAsText(t)}),u.find(".whb-prebuild-item").on("click",function(e){e.preventDefault(),confirm("Your selected header pre-defined will apply on current elements and settings. Are you sure you want to overwrite?")&&(e=q(this).data("file-name"),q(".whb-full-modal"),e=whb_localize.prebuilds_url+e,q.ajax({dataType:"json",type:"POST",url:e,success:function(e){I(e)}}))}),"vertical"==m["desktop-view"].row1.settings.header_type&&(a=(r=u.find(".whb-tabs-panels")).find("#desktop-view").children('.whb-columns[data-columns="row1"]').children(".whb-elements-item"),d=q("#whb-vertical-header"),a.attr("data-element","vertical-area"),d.find("span").text("Horizontal Header"),r.addClass("whb-vertical-header-panel"),l.sortable({axis:"y"})),u.on("click","#whb-vertical-header",function(e){e.preventDefault();var e=q(this),t=q(".whb-tabs-list"),n=u.find(".whb-tabs-panels"),a=n.find("#desktop-view").children('.whb-columns[data-columns="row1"]').children(".whb-elements-item"),i=m["desktop-view"].row1.settings;"horizontal"==i.header_type?(i.element="vertical-area",a.attr("data-element","vertical-area"),i.header_type="vertical",e.find("span").text("Horizontal Header"),n.addClass("whb-vertical-header-panel"),l.sortable({axis:"y"})):(i.element="header-area",a.attr("data-element","header-area"),i.header_type="horizontal",e.find("span").text("Vertical Header"),n.removeClass("whb-vertical-header-panel"),l.sortable({axis:""}),q("#wrap").removeClass("whb-header-vertical-toggle")),O(),S(),_(),t.find("li").removeClass("w-active"),t.find("li:first-child").addClass("w-active"),q(".whb-tab-panel").hide(),q("#desktop-view").show()}),q(".whb-languages").length&&(q(".whb-languages").niceSelect(),q("select.whb-languages").change(function(){var e=q(this).children("option:selected").val();location.replace(window.location.href+"&lang="+e)}))})})}(jQuery);
//# sourceMappingURL=whb-editor.js.map
