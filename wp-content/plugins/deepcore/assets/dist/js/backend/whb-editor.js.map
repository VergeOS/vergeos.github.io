{"version":3,"sources":["whb-editor.js"],"names":["window","onload","document","body","style","display","$","ready","$currentElement","$currentModalEdit","currentCell","currentRow","currentPanel","$clipboardElem","key","elemUniqueID","$body","$wrap","$sortablePlaces","find","$desktopSortablePlaces","components","Array","isArray","whb_localize","editorComponents","editor_components","frontendComponents","frontend_components","platforms","desktop-view","tablets-view","mobiles-view","importButtonFlag","whbDebug","console","log","whbIsJson","JSON","parse","e","whbIsFrontendBuilder","hasClass","hasOwnProperty","element","search","each","$logo","this","wp","media","attachment","logo","fetch","done","children","attributes","url","$headerSwitcher","docHeight","height","whbElementSettings","new_el","arguments","length","undefined","$tabPanels","attr","elemID","elemName","prepend","$fieldInput","fieldStd","type","ajaxurl","data","el_name","remove","append","removeClass","hide","push","name","show","hidden_element","currentElemHtml","editor_icon","uniqueId","whbFieldDependency","fieldName","val","whbModalDraggable","elemEditorIcon","$parent","dependencyData","parentValue","platform_key","$elem","haveDependency","$modalWrap","on","$delImgLink","$this","is","$imgIdInput","$imgContainer","html","removeAttr","frame","$inputNumber","$addImgLink","$numberUnit","$option","unit","event","preventDefault","addClass","num_val","state","get","first","toJSON","$customSelect","closest","css","id","trigger","$icon","value","valueUnit","$iconsWrap","$iconClass","wpColorPicker","forcePlaceholderSize","siblings","whbEditorDraggable","connectWith","placeholder","parseFloat","numberValue","start","start_cell_obj","destroyed","whbCreateFrontendComponents","always","whbSaveAllData","disableSelection","getElementsByClassName","els","i","$el","elem_value","elems","outerHTML","replaceWith","location","pos1","pos2","pos3","pos4","$editor","$actions","clientY","onmouseup","whbCloseModalDraggable","whbElementDrag","clientX","offsetTop","left","offsetLeft","onmousemove","onmousedown","whb_drag_mouse_down","whbInjectScriptToIframe","src","iframeHead","path","getElementsByTagName","myScript","scripts","createElement","$WHBFrontend","screen_key","rowKey","cell","component_key","background-color","box-shadow","Object","ajax","nonce","stringify","success","border-color","$newWHBFrontend","el","action","styles","frames","getElementById","innerHTML","contents","assets_url","content","cell_key","alert","whb_data_editor_components","String","_step","_iterator","_createForOfIteratorHelper","confirm","dataType","$modal","assign","prebuilds_url","err","f","whbImport","$tabs","result","desktopRow1Settings","header_type","whbIsObject","$settings","$panels","whb_data_components","axis","whb_data_frontend_components","$currentTab","parent","$tabUl","end","fadeIn","modalTarget","controlsHtml","uniqueID","Date","valueOf","editorIcon","toString","newElem","extend","clone","data-unique-id","data-hidden_element","panel","row","splice","$row","mustBeHidden","$save_btn","fieldValue","imageID","$currentElements","textValue","indexOf","replace","after","trim","ui","item","beforeStop","$els_place","new_cell_objs","map","iframeTagStyle","res","sortable","target","files","reader","FileReader","onReaderLoad","readAsText","file","fileName","text","row1","settings","niceSelect","change","language","href","jQuery"],"mappings":"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","file":"whb-editor.js","sourcesContent":["\"use strict\";\r\n\r\nwindow.onload = function () {\r\n\tdocument.body.style.display = \"block\";\r\n};\r\n\r\n(function ($) {\r\n\t$(document).ready(function () {\r\n\t\t$(window).on('load', function () {\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Global Variables\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// DOM variables\r\n\t\t\tvar $body = $('body');\r\n\t\t\tvar $wrap = $('#wn-header-builder');\r\n\t\t\tvar $sortablePlaces = $wrap.find('.whb-elements-place');\r\n\t\t\tvar $desktopSortablePlaces = $wrap.find('.whb-desktop-panel').find('.whb-columns[data-columns=\"row1\"]').find('.whb-elements-place');\r\n\t\t\tvar $currentElement;\r\n\t\t\tvar $currentModalEdit;\r\n\r\n\t\t\t// Data variables\r\n\t\t\tvar components = whb_localize.components && !Array.isArray(whb_localize.components) ? whb_localize.components : {};\r\n\t\t\tvar editorComponents = whb_localize.editor_components ? whb_localize.editor_components : {};\r\n\t\t\tvar frontendComponents = whb_localize.frontend_components ? whb_localize.frontend_components : {};\r\n\t\t\tconst platforms = {\r\n\t\t\t\t\"desktop-view\": {},\r\n\t\t\t\t\"tablets-view\": {},\r\n\t\t\t\t\"mobiles-view\": {},\r\n\t\t\t};\r\n\r\n\t\t\t// Position variables\r\n\t\t\tvar currentCell;\r\n\t\t\tvar currentRow;\r\n\t\t\tvar currentPanel;\r\n\r\n\t\t\t// Import button flag\r\n\t\t\tvar importButtonFlag = false;\r\n\r\n\t\t\t// Clipboard element\r\n\t\t\tvar $clipboardElem;\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Helper Functions\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbDebug() {\r\n\t\t\t\tconsole.log('%c Components:', 'font-size: 18px; background: #EC9787; color: #fff;', components);\r\n\t\t\t\tconsole.log('%c Editor Components:', 'font-size: 18px; background: #6F9FD8; color: #fff;', editorComponents);\r\n\t\t\t\tconsole.log('%c Frontend Components:', 'font-size: 18px; background: #ECDB54; color: #fff;', frontendComponents);\r\n\t\t\t}\r\n\t\t\twhbDebug();\r\n\r\n\t\t\t// check string is json\r\n\t\t\tfunction whbIsJson(str) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tJSON.parse(str);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tfunction whbIsObject(obj) {\r\n\t\t\t\treturn obj === Object(obj);\r\n\t\t\t}\r\n\r\n\t\t\t// Check for emptiness object\r\n\t\t\tfunction whbIsEmptyObj(obj) {\r\n\t\t\t\tfor (var key in obj) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tfunction whbIsFrontendBuilder() {\r\n\t\t\t\tif ($body.hasClass('whb-frontend-builder-wrap')) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Editor Preview\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfor (var key in components) {\r\n\t\t\t\tif (components.hasOwnProperty(key)) {\r\n\t\t\t\t\tconst element = components[key];\r\n\t\t\t\t\tif (key.search('logo') != -1) {\r\n\t\t\t\t\t\tvar elemUniqueID = key.slice('5');\r\n\t\t\t\t\t\t$wrap.find('.whb-elements-item[data-element=\"logo\"][data-unique-id=\"' + elemUniqueID + '\"]').each(function () {\r\n\t\t\t\t\t\t\tvar $logo = $(this);\r\n\t\t\t\t\t\t\twp.media.attachment(element.logo).fetch().done(function () {\r\n\t\t\t\t\t\t\t\t$logo.children('a').hide().after('<img class=\"whb-img-placeholder-el\" src=\"' + this.attributes.url + '\" alt=\"\">');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Frontend Builder Iframe Height\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tvar docHeight = $(document).height();\r\n\t\t\t$('#whbIframe').css('height', docHeight);\r\n\t\t\t$('#whbIframe').contents().find('a').on('click', function () {\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Nice Scroll\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// $('.whb-frontend-builder').niceScroll({\r\n\t\t\t// \tcursorborder: \"0\",\r\n\t\t\t// \tbackground: \"#e7e7e7\",\r\n\t\t\t// \tcursorcolor: \"#91989e\",\r\n\t\t\t// });\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Tab\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.find('.whb-tab-panel' + $wrap.find('.whb-tabs-list').find('li.w-active').find('a').attr('href')).show();\r\n\t\t\t$wrap.on('click', '.whb-tabs-list a', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar $currentTab = $this.parent();\r\n\t\t\t\tvar $tabs = $this.closest('ul').find('li');\r\n\t\t\t\tvar $tabUl = $this.closest('ul');\r\n\r\n\t\t\t\tif (!$currentTab.hasClass('w-active')) {\r\n\t\t\t\t\t// active current navigation\r\n\t\t\t\t\t$tabs.removeClass('w-active');\r\n\t\t\t\t\t$currentTab.addClass('w-active');\r\n\r\n\t\t\t\t\t// show panel\r\n\t\t\t\t\tif ($tabUl.hasClass('whb-element-groups')) {\r\n\t\t\t\t\t\t$wrap.find('.whb-group-panel').hide().end().find('.whb-group-panel[data-id=\"' + $this.attr('href') + '\"]').show();\r\n\t\t\t\t\t} else if ($tabUl.hasClass('whb-styling-groups')) {\r\n\t\t\t\t\t\t$tabUl.siblings('.whb-styling-group-panel').hide().end().siblings('.whb-styling-group-panel[data-id=\"' + $this.attr('href') + '\"]').show();\r\n\t\t\t\t\t} else if ($tabUl.hasClass('whb-styling-screens')) {\r\n\t\t\t\t\t\t$wrap.find('.whb-styling-screen-panel').hide().end().find('.whb-styling-screen-panel[data-id=\"' + $this.attr('href') + '\"]').show();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$wrap.find('.whb-tab-panel:not(.whb-group-panel)').hide().end().find('.whb-tab-panel' + $this.attr('href')).fadeIn(300);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Toggle device\r\n\t\t\t$('#whb-desktop-tab, #whb-sticky-tab').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$body.removeClass('whb-tablets-device whb-mobiles-device');\r\n\t\t\t\t$('.whb-screen-view').hide();\r\n\t\t\t\t$('.whb-desktop-view, .whb-sticky-view').show();\r\n\t\t\t});\r\n\r\n\t\t\t$('#whb-tablets-tab').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$body.removeClass('whb-mobiles-device');\r\n\t\t\t\t$body.addClass('whb-tablets-device');\r\n\t\t\t\t$('.whb-screen-view').hide();\r\n\t\t\t\t$('.whb-tablets-view').show();\r\n\t\t\t});\r\n\r\n\t\t\t$('#whb-mobiles-tab').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$body.removeClass('whb-tablets-device');\r\n\t\t\t\t$body.addClass('whb-mobiles-device');\r\n\t\t\t\t$('.whb-screen-view').hide();\r\n\t\t\t\t$('.whb-mobiles-view').show();\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Full Modal\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t// Show full modal\r\n\t\t\t$wrap.find('.whb-full-modal-btn').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar modalTarget = $this.data('modal-target');\r\n\t\t\t\tvar $modal = $wrap.find('.whb-full-modal[data-modal=\"' + modalTarget + '\"]');\r\n\r\n\t\t\t\t$body.css('overflow', 'hidden');\r\n\t\t\t\t$modal.find('textarea').val(' ');\r\n\t\t\t\t$modal.fadeIn(200);\r\n\t\t\t});\r\n\t\t\t// Hide full modal\r\n\t\t\t$wrap.find('.whb-full-modal-close').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t$body.css('overflow', 'initial');\r\n\t\t\t\t$wrap.find('.whb-full-modal').hide();\r\n\t\t\t});\r\n\r\n\t\t\t$wrap.find('.whb-full-modal').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t$body.css('overflow', 'initial');\r\n\t\t\t\t$wrap.find('.whb-full-modal').hide();\r\n\t\t\t});\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Add Element Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t// Show add element modal\r\n\t\t\t$wrap.on('click', '.w-add-element', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t$wrap.find('.whb-elements').show();\r\n\t\t\t\tcurrentPanel = $this.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\tcurrentRow = $this.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\tcurrentCell = $this.attr('data-align-col'); // left, center, right\r\n\t\t\t});\r\n\t\t\t// Hide add element modal\r\n\t\t\t$wrap.on('click', '.whb-modal-header i, .whb_close', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\t$wrap.find('.whb-modal-wrap[data-element-target]').remove();\r\n\t\t\t});\r\n\t\t\t// Append new element to editor\r\n\t\t\t$wrap.find('.whb-modal-wrap').on('click', '.whb-elements-item a', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar uniqueID = new Date().valueOf();\r\n\t\t\t\tvar editorIcon = $(this).find('i').attr('class');\r\n\t\t\t\tvar controlsHtml = `<span class=\"whb-controls\">\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Copy to Clipboard\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-copy-btn ti-files\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Settings\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-edit-btn sl-pencil\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Hide\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-hide-btn ti-eye\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Remove\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-delete-btn ti-close\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</span>`;\r\n\r\n\t\t\t\tif ($this.closest('.whb-elements-item').hasClass('whb-clipboard-item')) {\r\n\t\t\t\t\tvar $elem = $this.parent();\r\n\t\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\t\t\t\t\tvar newElem = elemName + '_' + uniqueID;\r\n\r\n\t\t\t\t\tfor (const key in components) {\r\n\t\t\t\t\t\tif (components.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\tconst element = $.extend(true, {}, components[key]);\r\n\t\t\t\t\t\t\tif (elemID == key) {\r\n\t\t\t\t\t\t\t\tcomponents[newElem] = element;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$currentElement = $clipboardElem.clone().removeClass('w-col-sm-4').attr({\r\n\t\t\t\t\t\t'data-unique-id': uniqueID\r\n\t\t\t\t\t}).prepend(controlsHtml);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$currentElement = $this.parent().clone().removeClass('w-col-sm-4').attr({\r\n\t\t\t\t\t\t'data-unique-id': uniqueID,\r\n\t\t\t\t\t\t'data-hidden_element': false,\r\n\t\t\t\t\t\t'data-editor_icon': editorIcon\r\n\t\t\t\t\t}).prepend(controlsHtml);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$wrap.find('.whb-columns[data-columns=\"' + currentRow + '\"]').find('.whb-col.col-' + currentCell).find('.whb-elements-place').append($currentElement);\r\n\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\twhbElementSettings($currentElement, currentPanel, true);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Copy Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb-copy-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $elem = $(this).closest('.whb-elements-item').clone();\r\n\r\n\t\t\t\t$clipboardElem = $elem.clone();\r\n\r\n\t\t\t\t// Remove all clipboard item\r\n\t\t\t\t$('.whb-clipboard-item').remove();\r\n\r\n\t\t\t\t// Create new clipboard item\r\n\t\t\t\t$elem.removeClass('ui-sortable-handle').addClass('w-col-sm-4 whb-clipboard-item');\r\n\t\t\t\t$elem.children('.whb-controls').remove().end().children('img').remove();\r\n\t\t\t\t$elem.children('a').css({\r\n\t\t\t\t\t'display': 'block',\r\n\t\t\t\t\t'background-color': '#e3e3e3'\r\n\t\t\t\t});\r\n\t\t\t\t$elem.find('i').removeClass('ti-control-record').addClass('ti-clipboard').css('color', '#f60');\r\n\t\t\t\t$elem.find('.whb-element-name').text('Paste (Clipboard)');\r\n\r\n\t\t\t\t// Append clipboard item to elements box\r\n\t\t\t\t$('.whb-modal-wrap.whb-elements').find('.whb-modal-contents').prepend($elem);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Delete Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb-delete-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tif (confirm('Press OK to delete element, Cancel to leave')) {\r\n\t\t\t\t\tvar $elem = $(this).closest('.whb-elements-item');\r\n\t\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\r\n\t\t\t\t\tcurrentPanel = $elem.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\r\n\t\t\t\t\t// delete from components\r\n\t\t\t\t\tdelete components[elemID];\r\n\r\n\t\t\t\t\t// delete from editor components\r\n\t\t\t\t\tif (currentPanel == 'sticky-view') {\r\n\t\t\t\t\t\tvar cell = editorComponents[currentPanel][currentRow][currentCell];\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < cell.length; i++) {\r\n\t\t\t\t\t\t\tif (cell[i].uniqueId == elemUniqueID) {\r\n\t\t\t\t\t\t\t\tcell.splice(i, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var platform_key in platforms) {\r\n\t\t\t\t\t\t\tvar findInCell = false;\r\n\t\t\t\t\t\t\tvar panel = editorComponents[platform_key];\r\n\r\n\t\t\t\t\t\t\t(function () {\r\n\t\t\t\t\t\t\t\tfor (var rowKey in panel) {\r\n\t\t\t\t\t\t\t\t\tvar row = panel[rowKey];\r\n\r\n\t\t\t\t\t\t\t\t\tfor (var cell_key in row) {\r\n\t\t\t\t\t\t\t\t\t\tvar cell = row[cell_key];\r\n\r\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < cell.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (cell[i].uniqueId == elemUniqueID) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcell.splice(i, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn; // return to anonymous function\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\t\twhbSaveAllData();\r\n\t\t\t\t\twhbDebug();\r\n\r\n\t\t\t\t\t$wrap.find('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]').remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Edit Button\r\n\t\t\t *\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb-edit-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\t$wrap.find('.whb-modal-wrap[data-element-target]').remove();\r\n\t\t\t\t$currentElement = $this.closest('.whb-elements-item');\r\n\t\t\t\tcurrentPanel = $this.closest('.whb-tab-panel').attr('id');\r\n\t\t\t\twhbElementSettings($currentElement, currentPanel);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Hidden Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t// row\r\n\t\t\t$wrap\r\n\t\t\t\t.find('.whb-tabs-panels').find('.whb-columns')\r\n\t\t\t\t.children('.whb-elements-item[data-hidden_element=\"true\"]')\r\n\t\t\t\t.find('i.whb-hide-btn').removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash')\r\n\t\t\t\t.closest('.whb-columns').addClass('whb-columns-hidden').css('opacity', '0.45');\r\n\r\n\t\t\t// elements\r\n\t\t\t$wrap\r\n\t\t\t\t.find('.whb-elements-place').find('.whb-elements-item[data-hidden_element=\"true\"]')\r\n\t\t\t\t.find('i.whb-hide-btn').removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash');\r\n\r\n\t\t\t$wrap.on('click', '.whb-hide-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t// Get variables\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar $elem = $this.closest('.whb-elements-item');\r\n\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\t\t\t\tvar hidden_element;\r\n\t\t\t\tvar mustBeHidden;\r\n\r\n\t\t\t\t// Position of the Current Element\r\n\t\t\t\tcurrentPanel = $elem.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\r\n\t\t\t\tif (elemName == 'header-area' || elemName == 'sticky-area') {\r\n\t\t\t\t\t// Toggle hidden_element value : ( true | false )\r\n\t\t\t\t\tvar hidden_element = editorComponents[currentPanel][currentRow]['settings']['hidden_element'];\r\n\t\t\t\t\teditorComponents[currentPanel][currentRow]['settings']['hidden_element'] = !hidden_element;\r\n\t\t\t\t\tmustBeHidden = !hidden_element;\r\n\t\t\t\t\t$elem.attr('data-hidden_element', !hidden_element).data('hidden_element', !hidden_element);\r\n\r\n\t\t\t\t\t// Change row opacity and eye icon\r\n\t\t\t\t\tvar $row = $elem.closest('.whb-columns');\r\n\t\t\t\t\tif (mustBeHidden) {\r\n\t\t\t\t\t\t$this.removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash');\r\n\t\t\t\t\t\t$row.addClass('whb-columns-hidden').css('opacity', '0.45');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.removeClass('wn-far wn-fa-eye-slash').addClass('ti-eye');\r\n\t\t\t\t\t\t$row.removeClass('whb-columns-hidden').css('opacity', '1');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Toggle hidden_element value : ( true | false )\r\n\t\t\t\t\tconst cell = editorComponents[currentPanel][currentRow][currentCell];\r\n\t\t\t\t\tfor (var i = 0; i < cell.length; i++) {\r\n\t\t\t\t\t\tvar element = cell[i];\r\n\t\t\t\t\t\tif (element.uniqueId == elemUniqueID) {\r\n\r\n\t\t\t\t\t\t\telement.hidden_element = !element.hidden_element;\r\n\t\t\t\t\t\t\tmustBeHidden = element.hidden_element;\r\n\t\t\t\t\t\t\t$elem.attr('data-hidden_element', element.hidden_element).data('hidden_element', element.hidden_element);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Change row opacity and eye icon\r\n\t\t\t\t\tif (mustBeHidden) {\r\n\t\t\t\t\t\t$this.removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash');\r\n\t\t\t\t\t\t$elem.find('a').css('color', '#888');\r\n\t\t\t\t\t\t$elem.addClass('whb-columns-hidden').css('opacity', '0.45');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.removeClass('wn-far wn-fa-eye-slash').addClass('ti-eye');\r\n\t\t\t\t\t\t$elem.find('a').css('color', '#0073aa');\r\n\t\t\t\t\t\t$elem.removeClass('whb-columns-hidden').css('opacity', '1');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\twhbSaveAllData();\r\n\t\t\t\twhbDebug();\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Save Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb_save', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $save_btn = $(this);\r\n\t\t\t\tvar elemName = $currentElement.data('element');\r\n\t\t\t\tvar elemUniqueID = $currentElement.data('unique-id');\r\n\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\r\n\t\t\t\t// Set field value\r\n\t\t\t\t$currentModalEdit.find('.whb-field').each(function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar $fieldInput = $this.find('.whb-field-input');\r\n\t\t\t\t\tvar fieldName = $fieldInput.data('field-name');\r\n\t\t\t\t\tvar fieldValue = $fieldInput.val();\r\n\r\n\t\t\t\t\tif (fieldValue == '') {\r\n\t\t\t\t\t\tif (components[elemID].hasOwnProperty(fieldName)) {\r\n\t\t\t\t\t\t\tcomponents[elemID][fieldName] = fieldValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (fieldValue != undefined) {\r\n\t\t\t\t\t\t\tif (typeof fieldValue == 'string' && fieldValue.indexOf('\"') != -1) {\r\n\t\t\t\t\t\t\t\tfieldValue = fieldValue.replace(/\"/g, \"'\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcomponents[elemID][fieldName] = fieldValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\twhbSaveAllData();\r\n\t\t\t\twhbDebug();\r\n\r\n\t\t\t\t// Copy element in all platforms\r\n\t\t\t\tvar currentElemHtml = $currentElement[0].outerHTML;\r\n\t\t\t\tvar $currentElements = $wrap.find('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]');\r\n\t\t\t\t$currentElements.each(function () {\r\n\t\t\t\t\t$(this).replaceWith(currentElemHtml);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Create preview for text and image field in editor\r\n\t\t\t\t$currentElements = $wrap.find('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]');\r\n\t\t\t\t$currentModalEdit.find('.whb-field.whb-placeholder').each(function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t\tif ($this.hasClass('whb-img-placeholder')) {\r\n\t\t\t\t\t\tvar imageID = $this.find('.whb-field-input').val();\r\n\r\n\t\t\t\t\t\tif (imageID) {\r\n\t\t\t\t\t\t\twp.media.attachment(imageID).fetch().done(function () {\r\n\t\t\t\t\t\t\t\tif (!$currentElements.children('.whb-img-placeholder-el').length > 0) {\r\n\t\t\t\t\t\t\t\t\t$currentElements.attr('data-img-placeholder', imageID).children('a').hide().after('<img class=\"whb-img-placeholder-el\" src=\"' + this.attributes.url + '\" alt=\"\" />');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t$currentElements.children('.whb-img-placeholder-el').attr('src', this.attributes.url);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$currentElements.removeAttr('data-img-placeholder').children('a').show().end().children('.whb-img-placeholder-el').remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($this.hasClass('whb-text-placeholder')) {\r\n\t\t\t\t\t\tvar textValue = $this.find('.whb-field-input').val();\r\n\r\n\t\t\t\t\t\tif (textValue.trim()) {\r\n\t\t\t\t\t\t\tif (!$currentElements.find('a').find('.whb-text-placeholder-el').length > 0) {\r\n\t\t\t\t\t\t\t\t$currentElements.find('a').find('.whb-element-name').hide().after('<span class=\"whb-text-placeholder-el\">' + textValue + '</span>');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$currentElements.find('a').find('.whb-text-placeholder-el').html(textValue);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$currentElements.find('a').find('span.whb-element-name').show().end().end().find('.whb-text-placeholder-el').remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Hide modal\r\n\t\t\t\tif (!whbIsFrontendBuilder()) {\r\n\t\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\t\t$wrap.find('.whb-modal-wrap[data-element-target]').remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Element Settings Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbElementSettings($currentElement, currentPanel, new_el = false) {\r\n\t\t\t\tvar elemName = $currentElement.attr('data-element');\r\n\t\t\t\tvar elemUniqueID = $currentElement.attr('data-unique-id');\r\n\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\r\n\t\t\t\tif (!components.hasOwnProperty(elemID)) {\r\n\t\t\t\t\tcomponents[elemID] = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Preloader\r\n\t\t\t\tif (!$wrap.children('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t$wrap.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'whb_get_component_fields',\r\n\t\t\t\t\t\tel_name: elemName,\r\n\t\t\t\t\t\tnonce: whb_localize.nonce\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\tif ($wrap.children('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t\t\t$wrap.children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$('.wn-header-builder-wrap').append(data);\r\n\r\n\t\t\t\t\t\t$currentModalEdit = $wrap.find('.whb-modal-wrap[data-element-target=\"' + elemName + '\"]');\r\n\r\n\t\t\t\t\t\t// Init tab\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-tabs-list').find('li').removeClass('w-active');\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-tab-panel').hide();\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-tabs-list').find('li:first').addClass('w-active');\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-modal-contents').children('.whb-tab-panel:first').show();\r\n\t\t\t\t\t\t// Styling tab\r\n\t\t\t\t\t\tvar $tabPanels = $currentModalEdit.find('.whb-modal-contents').children('.whb-tab-panel');\r\n\t\t\t\t\t\tif (currentPanel == 'desktop-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#all\"]').show();\r\n\t\t\t\t\t\t} else if (currentPanel == 'tablets-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#tablets\"]').show();\r\n\t\t\t\t\t\t} else if (currentPanel == 'mobiles-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#mobiles\"]').show();\r\n\t\t\t\t\t\t} else if (currentPanel == 'sticky-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#all\"]').show();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Show first panel\r\n\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel').find('.whb-tab-panel:first').show();\r\n\r\n\t\t\t\t\t\t// Show current modal edit\r\n\t\t\t\t\t\t$currentModalEdit.show();\r\n\r\n\t\t\t\t\t\t// Set fields values\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-field').each(function () {\r\n\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\tvar $fieldInput = $this.find('.whb-field-input');\r\n\t\t\t\t\t\t\tvar fieldName = $fieldInput.data('field-name');\r\n\t\t\t\t\t\t\tvar fieldStd = $fieldInput.data('field-std');\r\n\r\n\t\t\t\t\t\t\tfieldStd = (typeof fieldStd != 'undefined') ? fieldStd : '';\r\n\r\n\t\t\t\t\t\t\t// if statement: update field value\r\n\t\t\t\t\t\t\t// else statement: set default data to field\r\n\t\t\t\t\t\t\tif ($fieldInput.hasClass('whb-field-textarea')) {\r\n\t\t\t\t\t\t\t\t$fieldInput.val(components[elemID][fieldName]).val( components[elemID][fieldName]);\r\n\t\t\t\t\t\t\t} else if (typeof components[elemID][fieldName] != 'undefined') {\r\n\t\t\t\t\t\t\t\t$fieldInput.val(components[elemID][fieldName]);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$fieldInput.val(fieldStd).val(fieldStd);\r\n\t\t\t\t\t\t\t\tif (fieldStd) {\r\n\t\t\t\t\t\t\t\t\tcomponents[elemID][fieldName] = fieldStd;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (new_el) {\r\n\t\t\t\t\t\t\tvar elemEditorIcon = $currentElement.find('a').find('i').attr('class');\r\n\t\t\t\t\t\t\tif (currentPanel == 'sticky-view') {\r\n\t\t\t\t\t\t\t\teditorComponents[currentPanel][currentRow][currentCell].push({\r\n\t\t\t\t\t\t\t\t\tname: elemName,\r\n\t\t\t\t\t\t\t\t\tuniqueId: elemUniqueID,\r\n\t\t\t\t\t\t\t\t\thidden_element: false,\r\n\t\t\t\t\t\t\t\t\teditor_icon: elemEditorIcon\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (var platform_key in platforms) {\r\n\t\t\t\t\t\t\t\t\teditorComponents[platform_key][currentRow][currentCell].push({\r\n\t\t\t\t\t\t\t\t\t\tname: elemName,\r\n\t\t\t\t\t\t\t\t\t\tuniqueId: elemUniqueID,\r\n\t\t\t\t\t\t\t\t\t\thidden_element: false,\r\n\t\t\t\t\t\t\t\t\t\teditor_icon: elemEditorIcon\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Fields\r\n\t\t\t\t\t\twhbFields();\r\n\r\n\t\t\t\t\t\t// Dependency\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-dependency').on('change', function () {\r\n\t\t\t\t\t\t\twhbFieldDependency($(this));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-dependency').trigger('change');\r\n\r\n\t\t\t\t\t\t// Craete|Update element in all platforms (desktop, tablets, mobiles)\r\n\t\t\t\t\t\tif (new_el) {\r\n\t\t\t\t\t\t\tvar currentElemHtml = $currentElement[0].outerHTML;\r\n\t\t\t\t\t\t\t$('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]').each(function () {\r\n\t\t\t\t\t\t\t\t$(this).replaceWith(currentElemHtml);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\twhbModalDraggable($currentModalEdit[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\twhbDebug();\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Field Dependency Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbFieldDependency($parent) {\r\n\t\t\t\tvar dependencyData = $parent.data('dependency');\r\n\t\t\t\tvar parentValue = $parent.find('.whb-field-input').val();\r\n\r\n\t\t\t\t$.each(dependencyData, function (val, els) {\r\n\t\t\t\t\tfor (var i = 0; i < els.length; i++) {\r\n\r\n\t\t\t\t\t\tvar $elem = $currentModalEdit.find('.whb-field-input[data-field-name=\"' + els[i] + '\"]').closest('.whb-field').hide();\r\n\t\t\t\t\t\tvar haveDependency = $elem.attr('class') == 'whb-field w-col-sm-12 whb-dependency' ? true : false;\r\n\r\n\t\t\t\t\t\tif (val == parentValue) {\r\n\t\t\t\t\t\t\t$elem.show();\r\n\t\t\t\t\t\t\tif (haveDependency) {\r\n\t\t\t\t\t\t\t\twhbFieldDependency($el);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (haveDependency) {\r\n\t\t\t\t\t\t\t\t$.each($elem.data('dependency'), function (elem_value, elems) {\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < elems.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t$currentModalEdit.find('.whb-field-input[data-field-name=\"' + elems[i] + '\"]').closest('.whb-field').hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end for\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Fields Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbFields() {\r\n\t\t\t\tvar $modalWrap = $('.whb-modal-wrap');\r\n\r\n\t\t\t\t// Switcher field\r\n\t\t\t\t$modalWrap.find('.whb-switcher').find('.whb-field-input').on('change', function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t\tif ($this.is(':checked')) {\r\n\t\t\t\t\t\t$this.attr('value', 'true');\r\n\t\t\t\t\t\t$this.attr('checked', 'checked');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.attr('value', 'false');\r\n\t\t\t\t\t\t$this.removeAttr('checked');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Attach Image field\r\n\t\t\t\t$modalWrap.find('.whb-attach-image').each(function () {\r\n\t\t\t\t\tvar frame;\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar $addImgLink = $this.find('.whb-add-image');\r\n\t\t\t\t\tvar $delImgLink = $this.find('.whb-remove-image');\r\n\t\t\t\t\tvar $imgContainer = $this.find('.whb-preview-image');\r\n\r\n\t\t\t\t\t// ADD IMAGE LINK\r\n\t\t\t\t\t$addImgLink.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $imgIdInput = $this.find('input.whb-attach-image');\r\n\t\t\t\t\t\tvar value = $imgIdInput.val();\r\n\r\n\t\t\t\t\t\tvalue = value ? value : '';\r\n\r\n\t\t\t\t\t\t// If the media frame already exists, reopen it.\r\n\t\t\t\t\t\tif (frame) {\r\n\t\t\t\t\t\t\tframe.open();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Create a new media frame\r\n\t\t\t\t\t\tframe = wp.media({\r\n\t\t\t\t\t\t\tmultiple: false // Set to true to allow multiple files to be selected\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// When an image is selected in the media frame...\r\n\t\t\t\t\t\tframe.on('select', function () {\r\n\t\t\t\t\t\t\t// Get media attachment details from the frame state\r\n\t\t\t\t\t\t\tvar attachment = frame.state().get('selection').first().toJSON();\r\n\r\n\t\t\t\t\t\t\t// Send the attachment URL to our custom image input field.\r\n\t\t\t\t\t\t\t$imgContainer.html('').append('<img src=\"' + attachment.url + '\" alt=\"\">').css('display', 'block');\r\n\r\n\t\t\t\t\t\t\t// Send the attachment id to our hidden input\r\n\t\t\t\t\t\t\t$imgIdInput.val(attachment.id).trigger('input');\r\n\r\n\t\t\t\t\t\t\t// Unhide the remove image link\r\n\t\t\t\t\t\t\t$delImgLink.show();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// Finally, open the modal on click\r\n\t\t\t\t\t\tframe.open();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// Delete image link\r\n\t\t\t\t\t$delImgLink.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $imgIdInput = $this.find('input.whb-attach-image');\r\n\r\n\t\t\t\t\t\t// Clear out the preview image\r\n\t\t\t\t\t\t$imgContainer.html('').hide();\r\n\r\n\t\t\t\t\t\t// Hide the delete image link\r\n\t\t\t\t\t\t$delImgLink.hide();\r\n\r\n\t\t\t\t\t\t// Delete the image id from the hidden input\r\n\t\t\t\t\t\t$imgIdInput.attr('value', '').trigger('input');\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Number Unit field\r\n\t\t\t\t$modalWrap.find('.whb-number-unit').each(function () {\r\n\t\t\t\t\tvar $numberUnit = $(this);\r\n\t\t\t\t\tvar $inputNumber = $numberUnit.find('input[type=\"number\"]');\r\n\t\t\t\t\tvar $option = $numberUnit.find('.whb-opts').children('span');\r\n\t\t\t\t\tvar $fieldInput = $numberUnit.find('.whb-field-input');\r\n\r\n\t\t\t\t\t$option.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tvar unit = $this.data('value');\r\n\t\t\t\t\t\tvar num_val = $inputNumber.val();\r\n\r\n\t\t\t\t\t\t$option.removeClass('whb-active');\r\n\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\tif (num_val) {\r\n\t\t\t\t\t\t\t$fieldInput.attr('value', num_val + unit).trigger('input');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$inputNumber.on('change', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tvar unit = $numberUnit.find('.whb-opts').children('span.whb-active').data('value');\r\n\t\t\t\t\t\tvar num_val = $inputNumber.val();\r\n\r\n\t\t\t\t\t\tif (num_val) {\r\n\t\t\t\t\t\t\t$fieldInput.attr('value', num_val + unit).trigger('input');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$fieldInput.attr('value', '').trigger('input');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Custom Select field\r\n\t\t\t\t$modalWrap.find('.whb-custom-select').find('.whb-opts').find('span').on('click', function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar $customSelect = $this.closest('.whb-custom-select');\r\n\t\t\t\t\tvar $option = $customSelect.find('.whb-opts').children('span');\r\n\t\t\t\t\tvar $fieldInput = $customSelect.find('.whb-field-input');\r\n\t\t\t\t\tvar value = $this.data('value');\r\n\r\n\t\t\t\t\t$option.removeClass('whb-active');\r\n\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t$fieldInput.val( value ).trigger('input');\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Icons field\r\n\t\t\t\t$modalWrap.find('.whb-field-icons-wrap').each(function () {\r\n\t\t\t\t\tvar $iconsWrap = $(this);\r\n\t\t\t\t\tvar $icon = $iconsWrap.find('.wn-icon').find('label');\r\n\t\t\t\t\tvar $fieldInput = $iconsWrap.find('.whb-field-input');\r\n\r\n\t\t\t\t\t$icon.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tvar $iconClass = $this.attr('for');\r\n\r\n\t\t\t\t\t\t$icon.removeClass('whb-active');\r\n\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\t$fieldInput.attr('value', $iconClass).trigger('input');\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Color picker\r\n\t\t\t\t$modalWrap.find('.whb-color-picker').wpColorPicker();\r\n\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Header Builder - Set Value of Field\r\n\t\t\t\t * @version\t1.0.0\r\n\t\t\t\t */\r\n\t\t\t\t$modalWrap.find('.whb-field').find('.whb-field-input').each(function () {\r\n\t\t\t\t\tvar $fieldInput = $(this);\r\n\r\n\t\t\t\t\t// Switcher\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-switcher-field')) {\r\n\t\t\t\t\t\tif ($fieldInput.val() == 'true') {\r\n\t\t\t\t\t\t\t$fieldInput.attr('checked', 'checked').trigger('input');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$fieldInput.removeAttr('checked');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Custom Select\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-field-custom-select')) {\r\n\t\t\t\t\t\t$fieldInput.siblings('.whb-opts').find('span').each(function () {\r\n\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t$this.removeClass('whb-active');\r\n\t\t\t\t\t\t\tif ($this.data('value') == $fieldInput.val()) {\r\n\t\t\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Number Unit\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-field-number-unit')) {\r\n\t\t\t\t\t\tvar value = $fieldInput.val();\r\n\r\n\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\tvar $numberUnit = $fieldInput.closest('.whb-number-unit');\r\n\t\t\t\t\t\t\tvar $inputNumber = $numberUnit.find('input[type=\"number\"]');\r\n\t\t\t\t\t\t\tvar $option = $numberUnit.find('.whb-opts').children('span');\r\n\t\t\t\t\t\t\tvar numberValue = parseFloat(value);\r\n\t\t\t\t\t\t\tvar valueUnit = value.split(numberValue)[1];\r\n\r\n\t\t\t\t\t\t\t$inputNumber.val(numberValue).trigger('input');\r\n\t\t\t\t\t\t\t$option.each(function () {\r\n\t\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t\tvar unit = $this.data('value');\r\n\r\n\t\t\t\t\t\t\t\t$this.removeClass('whb-active');\r\n\t\t\t\t\t\t\t\tif (unit == valueUnit) {\r\n\t\t\t\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$fieldInput.closest('.whb-number-unit').find('input[type=\"number\"]').val('');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Icon\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-icon-field')) {\r\n\t\t\t\t\t\tvar value = $fieldInput.val();\r\n\t\t\t\t\t\tvar $iconsWrap = $fieldInput.closest('.whb-field-icons-wrap');\r\n\t\t\t\t\t\tvar $icon = $iconsWrap.find('.wn-icon').find('label');\r\n\r\n\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\t$icon.removeClass('whb-active');\r\n\t\t\t\t\t\t\t$iconsWrap.find('.wn-icon').find('label[for=\"' + value + '\"]').addClass('whb-active');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$icon.removeClass('whb-active');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Attach Image\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-attach-image')) {\r\n\t\t\t\t\t\tvar val = $fieldInput.val();\r\n\t\t\t\t\t\tvar $delImgLink = $fieldInput.siblings('.whb-remove-image');\r\n\t\t\t\t\t\tvar $imgContainer = $fieldInput.siblings('.whb-preview-image');\r\n\r\n\t\t\t\t\t\tif (val && !wp.media.attachment(val).destroyed) {\r\n\t\t\t\t\t\t\tif (!$currentModalEdit.find('.whb-modal-contents').find('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t\t\t\t$currentModalEdit.find('.whb-modal-contents').prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\twp.media.attachment(val).fetch().always(function () {\r\n\t\t\t\t\t\t\t\tif ($currentModalEdit.find('.whb-modal-contents').find('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t\t\t\t\t$currentModalEdit.find('.whb-modal-contents').find('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t$imgContainer.html('')\r\n\t\t\t\t\t\t\t\tif (this.attributes.url != undefined) {\r\n\t\t\t\t\t\t\t\t\t// Send the attachment URL to our custom image input field.\r\n\t\t\t\t\t\t\t\t\t$imgContainer.append('<img src=\"' + this.attributes.url + '\" alt=\"\">').css('display', 'block');\r\n\t\t\t\t\t\t\t\t\t// Unhide the remove image link\r\n\t\t\t\t\t\t\t\t\t$delImgLink.show();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// Clear out the preview image\r\n\t\t\t\t\t\t\t$imgContainer.html('').hide();\r\n\t\t\t\t\t\t\t// Hide the delete image link\r\n\t\t\t\t\t\t\t$delImgLink.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Drag and Drop Functions\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// Editor draggable\r\n\t\t\tfunction whbEditorDraggable() {\r\n\t\t\t\t$sortablePlaces.sortable({\r\n\t\t\t\t\tconnectWith: '.whb-elements-place',\r\n\t\t\t\t\tplaceholder: 'ui-sortable-placeholder',\r\n\t\t\t\t\tforcePlaceholderSize: true,\r\n\t\t\t\t\ttolerance: 'pointer',\r\n\t\t\t\t\tstart: function (event, ui) {\r\n\t\t\t\t\t\tvar $elem = $(ui.item);\r\n\r\n\t\t\t\t\t\tcurrentPanel = $elem.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbeforeStop: function (event, ui) {\r\n\t\t\t\t\t\tvar $elem = $(ui.item);\r\n\t\t\t\t\t\tvar $els_place = $elem.closest('.whb-elements-place');\r\n\t\t\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\t\t\t\t\t\tvar elemFromCell;\r\n\r\n\t\t\t\t\t\t// Remove element from start cell\r\n\t\t\t\t\t\tvar start_cell_obj = editorComponents[currentPanel][currentRow][currentCell];\r\n\t\t\t\t\t\tfor (var i = 0; i < start_cell_obj.length; i++) {\r\n\t\t\t\t\t\t\tif (start_cell_obj[i].uniqueId == elemUniqueID) {\r\n\t\t\t\t\t\t\t\telemFromCell = start_cell_obj.splice(i, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Add element to received cell\r\n\t\t\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\t\t\t\t\t\tvar new_cell_objs = $els_place.children('.whb-elements-item').map(function (i, el) {\r\n\t\t\t\t\t\t\t$elem = $(el);\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tname: $elem.data('element'),\r\n\t\t\t\t\t\t\t\tuniqueId: $elem.data('unique-id').toString(),\r\n\t\t\t\t\t\t\t\thidden_element: JSON.parse($elem.data('hidden_element')),\r\n\t\t\t\t\t\t\t\teditor_icon: $elem.data('editor_icon'),\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}).get();\r\n\r\n\t\t\t\t\t\t// Update editor components\r\n\t\t\t\t\t\teditorComponents[currentPanel][currentRow][currentCell] = new_cell_objs;\r\n\r\n\t\t\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\t\t\twhbSaveAllData();\r\n\t\t\t\t\t\twhbDebug();\r\n\t\t\t\t\t}\r\n\t\t\t\t}).disableSelection();\r\n\t\t\t}\r\n\t\t\twhbEditorDraggable();\r\n\r\n\t\t\t// Modal draggable\r\n\t\t\tfunction whbModalDraggable(element) {\r\n\t\t\t\tvar pos1 = 0,\r\n\t\t\t\t\tpos2 = 0,\r\n\t\t\t\t\tpos3 = 0,\r\n\t\t\t\t\tpos4 = 0;\r\n\r\n\t\t\t\tif (element.getElementsByClassName('whb-modal-header')) {\r\n\t\t\t\t\telement.getElementsByClassName('whb-modal-header')[0].onmousedown = whb_drag_mouse_down;\r\n\t\t\t\t} else {\r\n\t\t\t\t\telement.onmousedown = whb_drag_mouse_down;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction whb_drag_mouse_down(e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\tpos3 = e.clientX;\r\n\t\t\t\t\tpos4 = e.clientY;\r\n\t\t\t\t\tdocument.onmouseup = whbCloseModalDraggable;\r\n\t\t\t\t\tdocument.onmousemove = whbElementDrag;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction whbElementDrag(e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\tpos1 = pos3 - e.clientX;\r\n\t\t\t\t\tpos2 = pos4 - e.clientY;\r\n\t\t\t\t\tpos3 = e.clientX;\r\n\t\t\t\t\tpos4 = e.clientY;\r\n\t\t\t\t\telement.style.top = (element.offsetTop - pos2) + \"px\";\r\n\t\t\t\t\telement.style.left = (element.offsetLeft - pos1) + \"px\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction whbCloseModalDraggable() {\r\n\t\t\t\t\tdocument.onmouseup = null;\r\n\t\t\t\t\tdocument.onmousemove = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twhbModalDraggable($('.whb-modal-wrap')[0]);\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Publish Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t$('.redux-action_bar input[name=\"redux_save\"], #whb-publish').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t// Editor Preloader\r\n\t\t\t\tif ($wrap.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t$wrap.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Frontend Preloader\r\n\t\t\t\tvar $WHBFrontend = $('#whbIframe').contents().find('#webnus-header-builder');\r\n\t\t\t\t// var $WHBFrontend = $('#webnus-header-builder');\r\n\t\t\t\tif ($WHBFrontend.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t$WHBFrontend.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'whb_publish',\r\n\t\t\t\t\t\tnonce: whb_localize.nonce,\r\n\t\t\t\t\t\tcomponents: JSON.stringify(components),\r\n\t\t\t\t\t\teditorComponents: JSON.stringify(editorComponents),\r\n\t\t\t\t\t\tfrontendComponents: JSON.stringify(frontendComponents),\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t// Remove prelaoder\r\n\t\t\t\t\t\t$wrap.children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t$WHBFrontend.children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\tif (importButtonFlag) {\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Collapse Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t$('.whb-action-collapse').on('click', function () {\r\n\t\t\t\tvar $elem = $(this);\r\n\t\t\t\tvar $editor = $('.wn-header-builder-wrap.whb-frontend-builder').css('bottom', '-60%');\r\n\t\t\t\tvar $actions = $('.whb-actions').css('bottom', '0');\r\n\r\n\t\t\t\t// if: close\r\n\t\t\t\t// else: open\r\n\t\t\t\tif ($elem.hasClass('whb-open')) {\r\n\t\t\t\t\t$editor.css('bottom', '-60%');\r\n\t\t\t\t\t$actions.css('bottom', '0');\r\n\t\t\t\t\t$elem.removeClass('whb-open')\r\n\t\t\t\t\t$elem.children('i').attr('class', 'ti-arrow-circle-up');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$editor.css('bottom', '0');\r\n\t\t\t\t\t$actions.css('bottom', '60%');\r\n\t\t\t\t\t$elem.addClass('whb-open')\r\n\t\t\t\t\t$elem.children('i').attr('class', 'ti-arrow-circle-down');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Get Script\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbInjectScriptToIframe(src) {\r\n\t\t\t\tvar iframeHead = window.frames[\"whbIframe\"].document.getElementsByTagName(\"head\")[0];\r\n\t\t\t\tvar myScript = document.createElement('script');\r\n\t\t\t\tmyScript.src = src;\r\n\t\t\t\tiframeHead.appendChild(myScript);\r\n\t\t\t}\r\n\r\n\t\t\tfunction whbInjectStyleToIframe(styles) {\r\n\t\t\t\tvar iframeTagStyle = window.frames[\"whbIframe\"].document;\r\n\t\t\t\tiframeTagStyle.getElementById('whb-enqueue-dynamic-style').children[0].innerHTML = styles;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Save All Data Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbSaveAllData() {\r\n\t\t\t\tvar $WHBFrontend = $('#whbIframe').contents().find('#webnus-header-builder');\r\n\r\n\t\t\t\t// Frontend Preloader\r\n\t\t\t\tif ($WHBFrontend.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t$WHBFrontend.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t$('.whb_save').css({\r\n\t\t\t\t\t\t'background-color': '#4cbf67',\r\n\t\t\t\t\t\t'box-shadow': '0 3px 10px -3px #4cbf67',\r\n\t\t\t\t\t\t'border-color': '#4cbf67'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'whb_save_data',\r\n\t\t\t\t\t\tnonce: whb_localize.nonce,\r\n\t\t\t\t\t\tfrontendComponents: JSON.stringify(frontendComponents),\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t\t\t$('.whb_save').css({\r\n\t\t\t\t\t\t\t\t'background-color': '#07bbe9',\r\n\t\t\t\t\t\t\t\t'box-shadow': '0 3px 10px -3px #07bbe9',\r\n\t\t\t\t\t\t\t\t'border-color': '#07bbe9'\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tvar $newWHBFrontend = $(data);\r\n\r\n\t\t\t\t\t\t\t// Frontend Preloader\r\n\t\t\t\t\t\t\tif ($newWHBFrontend.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t\t\t\t$newWHBFrontend.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$WHBFrontend[0].outerHTML = $newWHBFrontend[0].outerHTML;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (importButtonFlag) {\r\n\t\t\t\t\t\t\t$('.redux-action_bar input[name=\"redux_save\"], #whb-publish').trigger('click');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\taction: 'whb_live_dynamic_styles',\r\n\t\t\t\t\t\t\t\t\t\tnonce: whb_localize.nonce,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\t\t\t\t\twhbInjectStyleToIframe(data);\r\n\t\t\t\t\t\t\t\t\t\t$('#whbIframe').contents().find('#webnus-header-builder').children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t\t\tvar path = whb_localize.assets_url + 'src/frontend/';\r\n\t\t\t\t\t\t\tvar scripts = [\r\n\t\t\t\t\t\t\t\t'whb-jquery-plugins.js',\r\n\t\t\t\t\t\t\t\t'whb-frontend.js',\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\twhbInjectScriptToIframe(path + scripts[0]);\r\n\t\t\t\t\t\t\twhbInjectScriptToIframe(path + scripts[1]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Create Frontend Components Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbCreateFrontendComponents() {\r\n\t\t\t\tfrontendComponents = $.extend(true, {}, editorComponents);\r\n\t\t\t\tfor (var screen_key in frontendComponents) {\r\n\t\t\t\t\tfor (var rowKey in frontendComponents[screen_key]) {\r\n\t\t\t\t\t\tfor (var cell_key in frontendComponents[screen_key][rowKey]) {\r\n\t\t\t\t\t\t\tvar cell = frontendComponents[screen_key][rowKey][cell_key];\r\n\r\n\t\t\t\t\t\t\tif (cell_key == 'settings') {\r\n\t\t\t\t\t\t\t\tvar elemName = cell.element;\r\n\t\t\t\t\t\t\t\tvar elemID = cell.uniqueId;\r\n\t\t\t\t\t\t\t\tvar component_key = elemName + '_' + elemID;\r\n\r\n\t\t\t\t\t\t\t\tif (component_key in components) {\r\n\t\t\t\t\t\t\t\t\tObject.assign(cell, components[component_key]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfor (const key in cell) {\r\n\t\t\t\t\t\t\t\t\tif (cell.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\t\t\t\tconst value = cell[key];\r\n\t\t\t\t\t\t\t\t\t\tif (key != 'hidden_element' && typeof value === 'boolean') {\r\n\t\t\t\t\t\t\t\t\t\t\tcell[key] = String(value);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (cell.length != 0) {\r\n\t\t\t\t\t\t\t\t\tfor (var el of cell) {\r\n\t\t\t\t\t\t\t\t\t\tvar elemName = el.name;\r\n\t\t\t\t\t\t\t\t\t\tvar elemID = el.uniqueId;\r\n\t\t\t\t\t\t\t\t\t\tvar component_key = elemName + '_' + elemID;\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (component_key in components) {\r\n\t\t\t\t\t\t\t\t\t\t\tObject.assign(el, components[component_key]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tfor (const key in el) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (el.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst value = el[key];\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (key != 'hidden_element' && typeof value === 'boolean') {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tel[key] = String(value);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Import Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// import button\r\n\t\t\t$(\"#whb-import\").change(function (e) {\r\n\t\t\t\tvar file = event.target.files[0];\r\n\t\t\t\tvar reader = new FileReader();\r\n\t\t\t\treader.onload = onReaderLoad;\r\n\t\t\t\treader.readAsText(file);\r\n\t\t\t});\r\n\r\n\t\t\tfunction onReaderLoad(event) {\r\n\t\t\t\twhbImport(event.target.result);\r\n\t\t\t}\r\n\t\t\t// Import function\r\n\t\t\tfunction whbImport(content) {\r\n\t\t\t\tif (content && (whbIsJson(content) || whbIsObject(content))) {\r\n\t\t\t\t\t$body.css({\r\n\t\t\t\t\t\t'height': '1px',\r\n\t\t\t\t\t\t'overflow': 'hidden'\r\n\t\t\t\t\t}).prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t\t$('#wpwrap').css('display', 'none');\r\n\t\t\t\t\tcontent = whbIsJson(content) ? JSON.parse(content) : content;\r\n\t\t\t\t\tcomponents = content.whb_data_components;\r\n\t\t\t\t\teditorComponents = content.whb_data_editor_components;\r\n\t\t\t\t\tfrontendComponents = content.whb_data_frontend_components;\r\n\t\t\t\t\timportButtonFlag = true;\r\n\t\t\t\t\twhbSaveAllData();\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert('Header import input is empty! That\\'s why no data can import.');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Prebuild Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t$wrap.find('.whb-prebuild-item').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tif (confirm('Your selected header pre-defined will apply on current elements and settings. Are you sure you want to overwrite?')) {\r\n\t\t\t\t\tvar fileName = $(this).data('file-name');\r\n\t\t\t\t\tvar $modal = $('.whb-full-modal');\r\n\t\t\t\t\tvar url = whb_localize.prebuilds_url + fileName;\r\n\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\tdataType: \"json\",\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\t\tvar content = data;\r\n\t\t\t\t\t\t\twhbImport(content);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Header Type Switcher Button (Vertical|Horizontal)\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tif (editorComponents['desktop-view']['row1']['settings']['header_type'] == 'vertical') {\r\n\t\t\t\tvar $panels = $wrap.find('.whb-tabs-panels');\r\n\t\t\t\tvar $settings = $panels.find('#desktop-view').children('.whb-columns[data-columns=\"row1\"]').children('.whb-elements-item');\r\n\t\t\t\tvar $headerSwitcher = $('#whb-vertical-header');\r\n\r\n\t\t\t\t$settings.attr('data-element', 'vertical-area');\r\n\t\t\t\t$headerSwitcher.find('span').text('Horizontal Header');\r\n\t\t\t\t$panels.addClass('whb-vertical-header-panel');\r\n\t\t\t\t$desktopSortablePlaces.sortable({\r\n\t\t\t\t\taxis: 'y'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t$wrap.on('click', '#whb-vertical-header', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar $tabs = $('.whb-tabs-list');\r\n\t\t\t\tvar $panels = $wrap.find('.whb-tabs-panels');\r\n\t\t\t\tvar $settings = $panels.find('#desktop-view').children('.whb-columns[data-columns=\"row1\"]').children('.whb-elements-item');\r\n\t\t\t\tvar desktopRow1Settings = editorComponents['desktop-view'].row1.settings;\r\n\t\t\t\tvar header_type = desktopRow1Settings.header_type;\r\n\r\n\t\t\t\tif (header_type == 'horizontal') {\r\n\t\t\t\t\tdesktopRow1Settings.element = 'vertical-area';\r\n\t\t\t\t\t$settings.attr('data-element', 'vertical-area');\r\n\t\t\t\t\tdesktopRow1Settings.header_type = 'vertical';\r\n\t\t\t\t\t$this.find('span').text('Horizontal Header');\r\n\t\t\t\t\t$panels.addClass('whb-vertical-header-panel');\r\n\t\t\t\t\t$desktopSortablePlaces.sortable({\r\n\t\t\t\t\t\taxis: 'y'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdesktopRow1Settings.element = 'header-area';\r\n\t\t\t\t\t$settings.attr('data-element', 'header-area');\r\n\t\t\t\t\tdesktopRow1Settings.header_type = 'horizontal';\r\n\t\t\t\t\t$this.find('span').text('Vertical Header');\r\n\t\t\t\t\t$panels.removeClass('whb-vertical-header-panel');\r\n\t\t\t\t\t$desktopSortablePlaces.sortable({\r\n\t\t\t\t\t\taxis: ''\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$('#wrap').removeClass('whb-header-vertical-toggle');\r\n\t\t\t\t}\r\n\r\n\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\twhbSaveAllData();\r\n\t\t\t\twhbDebug();\r\n\r\n\t\t\t\t// show desktop panel\r\n\t\t\t\t$tabs.find('li').removeClass('w-active');\r\n\t\t\t\t$tabs.find('li:first-child').addClass('w-active');\r\n\t\t\t\t$('.whb-tab-panel').hide();\r\n\t\t\t\t$('#desktop-view').show();\r\n\t\t\t});\r\n\r\n\t\t\t(function () {\r\n\t\t\t\tif ($('.whb-languages').length) {\r\n\t\t\t\t\t$('.whb-languages').niceSelect();\r\n\t\t\t\t\tvar $select = $('select.whb-languages');\r\n\t\t\t\t\t$select.change(function () {\r\n\t\t\t\t\t\tvar language = $(this).children(\"option:selected\").val();\r\n\t\t\t\t\t\tlocation.replace(window.location.href + '&lang=' + language);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t});\r\n\t}); // end document ready\r\n})(jQuery);"]}